{"ast":null,"code":"// [spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte]\n// [price.duration,price.exceptional_price,price.exceptional_acompte,price.ordinary_price,price.ordinary_acompte]\nscriptPrincipal();\n\nfunction scriptPrincipal() {\n  /*==========================================================================*/\n\n  /*~~~~~~~~~~~~~~~~~~~~~~~~~SPA~~~~~~~~~~~~~~~~~~~~~~~~~*/\n  var removeSpa = document.getElementById(\"remove-spa\");\n  var addSpa = document.getElementById(\"add-spa\");\n  removeSpa.addEventListener('click', removeSpaList);\n  addSpa.addEventListener('click', addSpaList);\n  /*==========================================================================*/\n\n  /*~~~~~~~~~~~~~~~~~~~~~~~Massage~~~~~~~~~~~~~~~~~~~~~~~*/\n\n  var buttonRmvs = document.querySelectorAll('.remove-massage');\n  buttonRmvs.forEach(function (buttonRmv) {\n    buttonRmv.addEventListener('click', removeCategoryMassage);\n  });\n  var buttonAdds = document.querySelectorAll('.add-massage');\n  buttonAdds.forEach(function (buttonAdd) {\n    buttonAdd.addEventListener('click', addCategoryMassage);\n  });\n  /*==========================================================================*/\n\n  /*~~~~~~~~~~~~~~~~~~~~~~~Cadeau~~~~~~~~~~~~~~~~~~~~~~~*/\n\n  var rmvCadeau = document.querySelectorAll(\".cadeau-rmv\");\n  rmvCadeau.forEach(function (rmv) {\n    rmv.addEventListener('click', removeCadeau);\n  });\n  var addCadeau = document.querySelectorAll(\".cadeau-add\");\n  addCadeau.forEach(function (add) {\n    add.addEventListener('click', aDDCadeau);\n  });\n  /*==========================================================================*/\n\n  /*~~~~~~~~~~~~Date Heurs Pays Departement Praticient ~~~~~~~~~~~~~~~~~*/\n\n  document.getElementById(\"country-choice\").addEventListener(\"change\", showDepartementIfFrance); // praticien\n\n  var addPraticient = document.querySelectorAll(\".praticien-list\");\n  addPraticient.forEach(function (add) {\n    add.addEventListener('change', addPraticientAtSession);\n  });\n  document.getElementById(\"heure-spa\").addEventListener(\"change\", addHoursInPrestation);\n  document.getElementById(\"heure-massage\").addEventListener(\"change\", addHoursInPrestation);\n  /*==========================================================================*/\n\n  /*~~~~~~~~~~~~Verifier si il y a un truc dans la session ~~~~~~~~~~~~~*/\n\n  verifySession();\n} // \n//\n\n/*==========================================================================*/\n// verifier si la session est vide ou pas\n\n\nfunction verifySession() {\n  // ajouter le pays dans la session\n  var isHasSpaMassage = false;\n  var spa = sessionStorage.getItem(\"spa\");\n  var massages = sessionStorage.getItem(\"massages\");\n  var cadeau = sessionStorage.getItem(\"cadeau\"); // prestations.pays = \"\" // prestations.departement = \"\" // prestations.date = \"\" // prestations.heurs = \"\" // prestations.praticient = \"\"\t\n\n  var prestations = sessionStorage.getItem(\"prestations\");\n  var jsonPresta = JSON.parse(prestations);\n\n  if ((spa == null || spa == \"\") && (massages == null || massages == \"\")) {\n    initSession();\n    return;\n  } else {\n    if (spa != null && spa != \"\") {\n      spa = JSON.parse(spa);\n\n      for (var i = spa.length - 1; i >= 0; i--) {\n        if (spa[i].id == null || spa[i].time == \"\") {\n          spa.splice(i, 1); // null daholo ny spa ato\n        } else {\n          isHasSpaMassage = true; //nisy spa tsy null le aza\n        }\n      }\n\n      sessionStorage.setItem(\"spa\", JSON.stringify(spa));\n    }\n\n    if (massages != null && massages != \"\") {\n      massages = JSON.parse(massages);\n\n      for (var i = massages.length - 1; i >= 0; i--) {\n        if (massages[i].id == null || massages[i].cat == \"\" || typeof massages[i].sub == \"string\" || typeof massages[i].time == \"string\") {\n          massages.splice(i, 1); // null daholo ny massages\n        } else {\n          isHasSpaMassage = true; // nisy massages tsy null le aza\n        }\n      }\n\n      sessionStorage.setItem(\"massages\", JSON.stringify(massages));\n    }\n  }\n\n  if (isHasSpaMassage) {\n    addDomIndex();\n\n    if (jsonPresta.code_promo) {\n      changePromoCode(jsonPresta);\n    }\n  } else {\n    initSession();\n  }\n} // initialiser la session\n\n\nfunction initSession() {\n  sessionStorage.setItem(\"prestations\", \"{}\");\n  sessionStorage.setItem(\"spa\", \"[]\");\n  sessionStorage.setItem(\"massages\", \"[]\");\n  sessionStorage.setItem(\"cadeau\", \"[]\");\n  sessionStorage.setItem(\"inc\", \"0\");\n}\n/*==========================================================================*/\n// remettre les elements si un l'user a actualisé\n\n\nfunction addDomIndex() {\n  var dataForm = JSON.parse(document.getElementById('form-data').dataset.spas);\n  var dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions);\n  var dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages);\n  var spa = JSON.parse(sessionStorage.getItem(\"spa\"));\n  var massages = JSON.parse(sessionStorage.getItem(\"massages\"));\n  var cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\")); // prestations.pays = \"\" // prestations.departement = \"\" // prestations.date = \"\" // prestations.heurs = \"\" // prestations.praticient = \"\"\t\n\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\")); // Ajouter les spa selectionné dans le dom\n\n  var tmpTime = \"\";\n\n  if (0 < spa.length) {\n    for (var i = 0; i < spa.length; i++) {\n      actualiseDomSpa(spa[i].id, [spa[i].id, spa[i].time, spa[i].option, spa[i].info]);\n      tmpTime = document.querySelector(\"input[data-index=\\'\" + spa[i].id + \"\\'][data-array=\\'\" + spa[i].time + \"\\'].time-spa-list\").value;\n      htmlTimeSpaOrder(tmpTime, spa[i].id, dataOption, dataForm);\n      htmlOptionSpaOrder(spa[i].id, dataOption, dataForm, spa[i].option);\n    }\n\n    document.getElementById(\"heure-spa\").value = prestations.heureSpa;\n  } // Ajouter les massages selectionné dans le dom\n\n\n  if (massages.length != 0) {\n    for (var i = 0; i < massages.length; i++) {\n      actualiseDomMassage(massages[i].cat, massages[i].id, massages[i].sub, massages[i].time);\n      priceTotalForOneMassage(dataMassages, massages[i].id);\n      priceTotalForAllMassage(dataMassages);\n    }\n\n    document.getElementById(\"heure-massage\").value = prestations.heureMassage;\n  } // Ajouter le cadeau selectionné dans le dom\n\n\n  if (cadeau.length != 0) {\n    valueInInput = \"\";\n\n    for (var i = 0; i < cadeau.length; i++) {\n      // [[6,8],[7,3],[8,2],[9,1]]\n      document.getElementById(cadeau[i][0] + \"-nbr\").innerHTML = cadeau[i][1];\n      valueInInput += cadeau[i][0] + \"-\" + cadeau[i][1] + \"|\";\n    }\n\n    document.getElementById(\"cadeau-id\").value = valueInInput;\n    priceForAllCadeau();\n  } // Ajouter les information sur la zone et type de praticient\n\n\n  if (prestations.praticien != undefined) {\n    var listPratitiens = document.querySelectorAll(\".praticien-list\");\n\n    for (var i = listPratitiens.length - 1; i >= 0; i--) {\n      if (listPratitiens[i].value == prestations.praticien) {\n        listPratitiens[i].checked = true;\n      }\n    }\n  }\n}\n/*==========================================================================*/\n// les fonctions concernatant Date Heurs Pays Departement Praticient\n\n\nfunction showDepartementIfFrance() {\n  var x = this.value;\n  var input_dptm = document.getElementById(\"Departement\");\n  var div_dptm = document.getElementById(\"list-department\");\n\n  if (x == \"France\") {\n    input_dptm.removeAttribute(\"disabled\");\n    div_dptm.removeAttribute(\"class\");\n  } else {\n    input_dptm.setAttribute(\"disabled\", \"disabled\");\n    div_dptm.classList.add(\"hidden\");\n  }\n} // pour le praticien \n\n\nfunction addPraticientAtSession() {\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n  prestations.praticien = this.value;\n  sessionStorage.setItem(\"prestations\", JSON.stringify(prestations));\n}\n/*==========================================================================*/\n// les fonctions primaire utilisé dans SPA et massage\n\n\nfunction incrementeInc() {\n  /*incremente la valeur inc pour les params*/\n  var inc = JSON.parse(sessionStorage.getItem(\"inc\"));\n  inc++;\n  sessionStorage.setItem(\"inc\", JSON.stringify(inc));\n  return inc;\n}\n/*==========================================================================*/\n// les fonctions primaire SPA\n// [logemtn,installation,eau]\n\n\nfunction changeLogement() {\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    if (sessionSpa[i].id == this.dataset.index) {\n      sessionSpa[i].info[0] = this.value;\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n}\n\nfunction changeInstallation() {\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    if (sessionSpa[i].id == this.dataset.index) {\n      sessionSpa[i].info[1] = this.value;\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n}\n\nfunction changeTypeSpa() {\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    if (sessionSpa[i].id == this.dataset.index) {\n      sessionSpa[i].info[2] = this.value;\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n} // \"time\":\"1\",\"option\":[1,2,3]}]\n\n\nfunction valueToHtmlSpa(id) {\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n  var info = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n\n  /* code html pour l'ajout d'un spa */\n  var data = document.getElementById('form-data').dataset;\n  var dataSpas = JSON.parse(data.spas);\n  var dataSpaoptions = JSON.parse(data.spaoptions); // spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte\n\n  var typeSpa = \"<div class='col-sm-3'><h4><center class=\\\"titleSpa dureTitle\\\">Durée location</center></h4>\";\n\n  for (var i = 0; i < dataSpas.length; i++) {\n    if (time == i) {\n      typeSpa += \"<div class=\\\"duree-spa\\\"><input class=\\\"time-spa-list\\\" type=\\\"radio\\\" id=\\\"\" + id + \"h\" + dataSpas[i][0] + \"\\\" checked name=\\\"timeSpa[\" + id + \"][]\\\" value=\\\"\" + dataSpas[i][0] + \"\\\" data-prices=\\\"[\" + dataSpas[i][1] + \",\" + dataSpas[i][2] + \"]\\\" data-acompte=\\\"[\" + dataSpas[i][3] + \",\" + dataSpas[i][4] + \"]\\\" data-index=\\\"\" + id + \"\\\" data-array=\\\"\" + i + \"\\\"><label for=\\\"\" + id + \"h\" + dataSpas[i][0] + \"\\\" class=\\\"label-spa\\\">\" + dataSpas[i][0] + \"h</label></div>\";\n    } else {\n      typeSpa += \"<div class=\\\"duree-spa\\\"><input class=\\\"time-spa-list\\\" type=\\\"radio\\\" id=\\\"\" + id + \"h\" + dataSpas[i][0] + \"\\\" name=\\\"timeSpa[\" + id + \"][]\\\" value=\\\"\" + dataSpas[i][0] + \"\\\" data-prices=\\\"[\" + dataSpas[i][1] + \",\" + dataSpas[i][2] + \"]\\\" data-acompte=\\\"[\" + dataSpas[i][3] + \",\" + dataSpas[i][4] + \"]\\\" data-index=\\\"\" + id + \"\\\" data-array=\\\"\" + i + \"\\\"><label for=\\\"\" + id + \"h\" + dataSpas[i][0] + \"\\\" class=\\\"label-spa\\\">\" + dataSpas[i][0] + \"h</label></div>\";\n    }\n  }\n\n  typeSpa += \"</div><div class='col-sm-4 ambianceresponsive'><h4><center class=\\\"titleSpa\\\">Ambiance</center></h4>\";\n\n  for (var i = 0; i < dataSpaoptions.length; i++) {\n    if (option.includes(i)) {\n      typeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" checked name=\\\"optionSpa[\" + id + \"][]\\\" value=\\\"\" + dataSpaoptions[i][1] + \"\\\" id=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" data-array=\\\"\" + i + \"\\\" data-price=\\\"\" + dataSpaoptions[i][2] + \"\\\" data-index=\\\"\" + id + \"\\\" ><label for=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" class=\\\"label-option-spa\\\">\" + dataSpaoptions[i][1] + \"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\" + dataSpaoptions[i][1] + \"\\\"></i></div>\";\n    } else {\n      if (typeof option != \"string\") {\n        typeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" name=\\\"optionSpa[\" + id + \"][]\\\" value=\\\"\" + dataSpaoptions[i][1] + \"\\\" id=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" data-array=\\\"\" + i + \"\\\" data-price=\\\"\" + dataSpaoptions[i][2] + \"\\\" data-index=\\\"\" + id + \"\\\" ><label for=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" class=\\\"label-option-spa\\\">\" + dataSpaoptions[i][1] + \"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\" + dataSpaoptions[i][1] + \"\\\"></i></div>\";\n      } else {\n        typeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" name=\\\"optionSpa[\" + id + \"][]\\\" value=\\\"\" + dataSpaoptions[i][1] + \"\\\" id=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" data-array=\\\"\" + i + \"\\\" data-price=\\\"\" + dataSpaoptions[i][2] + \"\\\" data-index=\\\"\" + id + \"\\\" disabled ><label for=\\\"opt\" + dataSpaoptions[i][0] + \"\" + id + \"\\\" class=\\\"label-option-spa\\\">\" + dataSpaoptions[i][1] + \"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\" + dataSpaoptions[i][1] + \"\\\"></i></div>\";\n      }\n    }\n  } // [logemtn,installation,eau]\n\n\n  function isPresent(key, value) {\n    if (key == value) {\n      return \"selected=\\\"selected\\\"\";\n    } else {\n      return \"\";\n    }\n  }\n\n  if (info != \"\") {\n    typeSpa += \"</div><div class=\\\"col-sm-5 fin-spa\\\"><h4><center class=\\\"titleSpa informationTitle\\\">Informations sur la location</center></h4><br><div class=\\\"infoSpa\\\"><label class=\\\"label-info-spa\\\" for=\\\"logement\" + id + \"\\\">Type de logement</label><select class=\\\"logement selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"logement\" + id + \"\\\" ><option value=\\\"Appartement\\\" \" + isPresent(info[0], \"Appartement\") + \">Appartement</option><option value=\\\"Villa - Maison\\\" \" + isPresent(info[0], \"Villa - Maison\") + \" >Villa - Maison</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"installation\" + id + \"\\\" class=\\\"label-info-spa\\\">Type d'installation</label><select class=\\\"installation selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"installation\" + id + \"\\\"><option value=\\\"Intérieur\\\" \" + isPresent(info[1], \"Intérieur\") + \">Intérieur</option><option value=\\\"Extérieur\\\" \" + isPresent(info[1], \"Extérieur\") + \">Extérieur</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"eau\" + id + \"\\\" class=\\\"label-info-spa\\\">Système d'eau</label><select class=\\\"typeSpa selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"eau\" + id + \"\\\" ><option value=\\\"Cumulus - Ballon d'eau (eau chaude limitée)\\\"  \" + isPresent(info[2], \"Cumulus - Ballon d'eau (eau chaude limitée)\") + \">Cumulus - Ballon d\\'eau (eau chaude limitée)</option><option value=\\\"Chaudière (eau chaude continue)\\\" \" + isPresent(info[2], \"Chaudière (eau chaude continue)\") + \" >Chaudière (eau chaude continue)</option></select></div></div>\";\n  } else {\n    typeSpa += \"</div><div class=\\\"col-sm-5 fin-spa\\\"><h4><center class=\\\"titleSpa informationTitle\\\">Informations sur la location</center></h4><br><div class=\\\"infoSpa\\\"><label class=\\\"label-info-spa\\\" for=\\\"logement\" + id + \"\\\">Type de logement</label><select class=\\\"logement selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"logement\" + id + \"\\\" ><option value=\\\"Appartement\\\" selected=\\\"selected\\\">Appartement</option><option value=\\\"Villa - Maison\\\">Villa - Maison</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"installation\" + id + \"\\\" class=\\\"label-info-spa\\\">Type d'installation</label><select class=\\\"installation selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"installation\" + id + \"\\\"><option value=\\\"Intérieur\\\" selected=\\\"selected\\\">Intérieur</option><option value=\\\"Extérieur\\\">Extérieur</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"eau\" + id + \"\\\" class=\\\"label-info-spa\\\">Système d'eau</label><select class=\\\"typeSpa selectElement select-dro\\\" data-index=\\\"\" + id + \"\\\" name=\\\"typeSpa[\" + id + \"][]\\\" id=\\\"eau\" + id + \"\\\" ><option value=\\\"Cumulus - Ballon d'eau (eau chaude limitée)\\\" selected=\\\"selected\\\">Cumulus - Ballon d\\'eau (eau chaude limitée)</option><option value=\\\"Chaudière (eau chaude continue)\\\">Chaudière (eau chaude continue)</option></select></div></div>\";\n  }\n\n  return typeSpa;\n}\n\nfunction numberSpaSelected() {\n  var list = document.getElementsByClassName(\"spa-list-prestations\");\n  document.getElementById(\"number-spa\").innerHTML = list.length;\n}\n/*==========================================================================*/\n// les fonctions primaire MASSAGE\n\n\nfunction numberMassageSelected(name) {\n  var list = document.getElementsByClassName(\"massage-list-\" + name);\n  document.getElementById(\"number-\" + name).innerHTML = list.length;\n} // [{\"id\":1,\"cat\":\"Homme\",\"sub\":3,\"time\":1},{\"id\":2,\"cat\":\"Femme\",\"sub\":0,\"time\":1}]\n\n\nfunction valueToHtmlMassage(name, id) {\n  var sub = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var time = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var data = document.getElementById('form-data').dataset;\n  var dataMassages = JSON.parse(data.massages);\n  var categories = [];\n\n  if (name == \"Homme\") {\n    categories = dataMassages[0];\n  } else {\n    categories = dataMassages[1];\n  }\n\n  var heurs = [];\n  var htmlSub = \"\";\n  var htmlTime = \"\";\n\n  for (var i = 0; i < categories[1].length; i++) {\n    htmlSub += \"<div class=\\\"massage-type\\\">\";\n\n    if (i == 0) {\n      htmlSub += \"<input type=\\\"text\\\" name=\\\"massageSu[\" + id + \"][]\\\" value=\\\"\" + name + \"\\\" class=\\\"hidden\\\">\";\n    }\n\n    if (sub != null && sub == i) {\n      htmlSub += \"<input type=\\\"checkbox\\\" value=\\\"\" + categories[1][i][0] + \"\\\" checked id=\\\"sub\" + i + \"\" + id + \"\\\" class=\\\"massage-su\\\" name=\\\"massageSu[\" + id + \"][]\\\" data-info=\\\"[\" + [id, i] + \"]\\\"><label class=\\\"label-massage\\\" for=\\\"sub\" + i + \"\" + id + \"\\\"> \" + categories[1][i][0] + \" </label><i class=\\\"fa fa-question-circle questionMark\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#modal\" + i + \"\" + id + \"\\\"></i>\";\n      htmlTime += \"<div class=\\\"times-massage\\\" data-info=\\\"[\" + [id, i] + \"]\\\" ><ul>\";\n    } else {\n      htmlSub += \"<input type=\\\"checkbox\\\" value=\\\"\" + categories[1][i][0] + \"\\\" id=\\\"sub\" + i + \"\" + id + \"\\\" class=\\\"massage-su\\\" name=\\\"massageSu[\" + id + \"][]\\\" data-info=\\\"[\" + [id, i] + \"]\\\"><label class=\\\"label-massage\\\" for=\\\"sub\" + i + \"\" + id + \"\\\"> \" + categories[1][i][0] + \" </label><i class=\\\"fa fa-question-circle questionMark\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#modal\" + i + \"\" + id + \"\\\"></i>\";\n      htmlTime += \"<div class=\\\"times-massage hidden\\\" data-info=\\\"[\" + [id, i] + \"]\\\" ><ul>\";\n    }\n\n    htmlSub += \"</div>\";\n    heurs = categories[1][i][1]; // liste des heurs possibles\n\n    for (var j = 0; j < heurs.length; j++) {\n      if (time != null && time == j && sub != null && sub == i) {\n        htmlTime += \"<li class=\\\"duree-massage\\\"><input class=\\\"input-time-list time-spa-list\\\" type=\\\"radio\\\" value=\\\"\" + heurs[j][0] + \"\\\" checked id=\\\"time\" + j + i + id + \"\\\" name=\\\"massageSuPrice[\" + id + \"][]\\\" data-info=\\\"[\" + [id, i, j] + \"]\\\" data-price=\\\"[\" + [heurs[j][1], heurs[j][2], heurs[j][3], heurs[j][4]] + \"]\\\" data-sub=\\\"\" + categories[1][i][0] + \"\\\" data-name=\\\"\" + name + \"\\\" ><label class=\\\"form label-spa\\\" for=\\\"time\" + j + i + id + \"\\\"> \" + heurs[j][0] + \" </label></li>\";\n      } else {\n        htmlTime += \"<li class=\\\"duree-massage\\\"><input class=\\\"input-time-list time-spa-list\\\" type=\\\"radio\\\" value=\\\"\" + heurs[j][0] + \"\\\" id=\\\"time\" + j + i + id + \"\\\" name=\\\"massageSuPrice[\" + id + \"][]\\\" data-info=\\\"[\" + [id, i, j] + \"]\\\" data-price=\\\"[\" + [heurs[j][1], heurs[j][2], heurs[j][3], heurs[j][4]] + \"]\\\" data-sub=\\\"\" + categories[1][i][0] + \"\\\" data-name=\\\"\" + name + \"\\\" ><label class=\\\"form label-spa\\\" for=\\\"time\" + j + i + id + \"\\\"> \" + heurs[j][0] + \" </label></li>\";\n      }\n    }\n\n    htmlTime += \"</ul></div>\";\n  }\n\n  return \"<div class=\\\"row\\\"><div class=\\\"col-sm-12 sm-9-spa\\\"><div class=\\\"innerWrapper\\\"><div class=\\\"table-responsive table-responsiveInfos\\\"><table class=\\\"table tableInfos\\\"><thead><tr class=\\\"tr\\\"><th id=\\\"tableHead\\\">\" + name + \"</th></tr></thead></table></div></div></div></div><div class=\\\"row\\\"><div class=\\\"col-sm-10\\\"><h4><center class=\\\"titleMassage\\\">Types de massage</center></h4><div class=\\\"sm-6-massage\\\">\" + htmlSub + \"</div></div><div class=\\\"col-sm-2 col-sm2Duree\\\"><h4>Durée(min)</h4>\" + htmlTime + \"</div></div>\";\n}\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n\n\nfunction showTimesOnClickMassageSu() {\n  // data-info=\\\"[\"+ [id,i] +\"]\\\"\n  var dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages);\n  var myData = JSON.parse(this.dataset.info)[0];\n  document.getElementById(\"list-order-\" + myData).classList.add(\"hidden\");\n  var timeListAll = document.getElementsByClassName(\"times-massage\");\n  var timeList = [];\n  var inputList = []; // Enregistrement dans la session\n\n  var sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\")); // sessionMassage.push({id:id,cat:categories[0],sub:\"\",time:\"\",price:\"\"})\n\n  for (var i = sessionMassage.length - 1; i >= 0; i--) {\n    if (sessionMassage[i].id == myData) {\n      sessionMassage[i].sub = JSON.parse(this.dataset.info)[1];\n      sessionMassage[i].time = \"\";\n    }\n  }\n\n  sessionStorage.setItem(\"massages\", JSON.stringify(sessionMassage)); // Modification dans le DOM\n  // Selection les heurs et les checkbox a cocher disponible\n\n  for (var i = 0; i < timeListAll.length; i++) {\n    if (JSON.parse(timeListAll[i].dataset.info)[0] == myData) {\n      timeList = timeListAll[i].parentElement.getElementsByTagName(\"div\");\n      inputList = timeListAll[i].parentElement.getElementsByTagName(\"input\");\n      break;\n    }\n  } // remetre a zero les choix precedent sur les heurs dispo\n\n\n  for (var i = inputList.length - 1; i >= 0; i--) {\n    inputList[i].checked = false;\n  } // decocher les autre type de massage selectionné recedent!\n\n\n  var listCheck = document.getElementsByClassName(\"massage-su\");\n\n  for (var i = listCheck.length - 1; i >= 0; i--) {\n    if (JSON.parse(listCheck[i].dataset.info)[0] == myData && listCheck[i] != this) {\n      listCheck[i].checked = false;\n    }\n  }\n\n  if (this.checked) {\n    for (var i = 0; i < timeList.length; i++) {\n      if (timeList[i].dataset.info == this.dataset.info) {\n        timeList[i].className = \"times-massage\";\n      } else {\n        timeList[i].className = \"times-massage hidden\";\n      }\n    }\n  } else {\n    for (var i = 0; i < timeList.length; i++) {\n      if (timeList[i].dataset.info == this.dataset.info) {\n        timeList[i].className = \"times-massage hidden\";\n      }\n    }\n  }\n\n  priceTotalForAllMassage(dataMassages); // Grand prix total\n\n  bigTotalPrice();\n}\n/*==========================================================================*/\n// Fonction pour l'enregistrement de l'heurs\n\n\nfunction addHoursInPrestation() {\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n\n  if (this.name == \"heureMassage\") {\n    prestations.heureMassage = this.value;\n  } else {\n    prestations.heureSpa = this.value;\n  }\n\n  sessionStorage.setItem(\"prestations\", JSON.stringify(prestations));\n}\n/*==========================================================================*/\n// fonction principale SPA\n// evenement on click\n\n\nfunction actualiseDomSpa(id) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  // Modification dans le DOM\n  var div = document.createElement('div');\n  div.classList.add('spa-list-prestations');\n\n  if (data != \"\") {\n    // [spa[i].id,spa[i].time,spa[i].option,spa[i].info]\n    div.innerHTML = valueToHtmlSpa(data[0], data[1], data[2], data[3]);\n  } else {\n    div.innerHTML = valueToHtmlSpa(id);\n  }\n\n  document.getElementById('spa-input').appendChild(div); // Ajout des sous element dans la session et dans le panier\n\n  var timeSpa = document.querySelectorAll(\".time-spa-list\");\n  timeSpa.forEach(function (tSpa) {\n    tSpa.addEventListener('change', addRmvTimSpaInOrder);\n  });\n  var optionSpa = document.querySelectorAll(\".option-spa-list\");\n  optionSpa.forEach(function (oSpa) {\n    oSpa.addEventListener('change', addRmvOptionSpaInOrder);\n  }); // Ajout des autre information dans la session\n\n  var logement = document.querySelectorAll(\".logement\");\n  var installation = document.querySelectorAll(\".installation\");\n  var typeSpa = document.querySelectorAll(\".typeSpa\");\n  logement.forEach(function (log) {\n    log.addEventListener('change', changeLogement);\n  });\n  installation.forEach(function (inst) {\n    inst.addEventListener('change', changeInstallation);\n  });\n  typeSpa.forEach(function (type) {\n    type.addEventListener('change', changeTypeSpa);\n  }); // Ajout dans le panier\n\n  addSpaInOrder(id); // nombre de spa - 0 +\n\n  numberSpaSelected(); // Grand prix total\n\n  bigTotalPrice();\n}\n\nfunction addSpaList() {\n  var id = incrementeInc(); // Augmente de 1 la session\n  // Enregistrement dans la session\n\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\")); // [logemtn,installation,eau]\n\n  sessionSpa.push({\n    id: id,\n    time: \"\",\n    option: [],\n    info: [\"Appartement\", \"Intérieur\", \"Cumulus - Ballon d\\'eau (eau chaude limitée)\"]\n  });\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n  actualiseDomSpa(id);\n} // evenement on click\n\n\nfunction removeSpaList() {\n  var dataForm = JSON.parse(document.getElementById('form-data').dataset.spas);\n  var dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions); // Enregistrement dans la session\n\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n  sessionSpa.pop();\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n  numberAtOrderBtn(); // Modification dans le DOM\n\n  var list = document.getElementsByClassName(\"spa-list-prestations\");\n\n  if (list.length > 0) {\n    list[list.length - 1].remove(); // supprimer l'element dans le panier\n\n    rmvSpaInOrder(); // recalculer le prix total\n\n    priceTotalForAllSpa(dataOption, dataForm);\n  }\n\n  numberSpaSelected(); // Grand prix total\n\n  bigTotalPrice();\n} ////////////////////////////////////////////////////////\n// fonction principale commande SPA\n\n\nfunction addSpaInOrder(id) {\n  var divOrder = document.getElementById(\"spa-order\");\n  var div = document.createElement(\"div\");\n  div.classList = \"spa-order hidden\";\n  div.setAttribute(\"id\", \"spa-list-\" + id);\n  div.innerHTML = \"<p class=\\\"ul-panier\\\"><span class=\\\"spa-duration\\\">Spa pour : <span id=\\\"spa-time-\" + id + \"\\\"></span> h </span><br><span id=\\\"spa-price-\" + id + \"\\\"></span></p><ul></ul>\";\n  divOrder.appendChild(div);\n}\n\nfunction rmvSpaInOrder() {\n  var a = document.getElementsByClassName(\"spa-order\");\n  a[a.length - 1].remove();\n\n  if (a.length == 0) {\n    document.getElementById(\"spa-order\").classList.add('hidden');\n  }\n}\n\nfunction addRmvTimSpaInOrder() {\n  //checkbox na option spa\n  var dataForm = JSON.parse(document.getElementById('form-data').dataset.spas);\n  var dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions);\n  var index = this.dataset.index;\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\")); // Activer les checkbox pour les options spa\n\n  var inputList = document.querySelectorAll(\".option-spa-list[data-index=\\'\" + index + \"\\']\");\n\n  for (var i = inputList.length - 1; i >= 0; i--) {\n    inputList[i].removeAttribute(\"disabled\");\n  }\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    if (sessionSpa[i].id == index) {\n      sessionSpa[i].time = this.dataset.array;\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa));\n  numberAtOrderBtn(); // Ajouter l'element selectionné dans le dom\n\n  htmlTimeSpaOrder(this.value, index, dataOption, dataForm);\n}\n\nfunction htmlTimeSpaOrder(name, index, dataOption, dataForm) {\n  document.getElementById(\"spa-order\").classList.remove('hidden');\n  document.getElementById(\"spa-list-\" + index).classList.remove('hidden');\n  document.getElementById(\"spa-time-\" + index).innerHTML = name; // calcul prix pour un spa selectionné\n  // let pricesSpa = JSON.parse(this.dataset.prices)[1]\n  // let acompteSpa = JSON.parse(this.dataset.acompte)[1]\n\n  priceTotalForOneSpa(index, dataOption, dataForm); // total prix pours les spas selectionné\n\n  priceTotalForAllSpa(dataOption, dataForm);\n}\n\nfunction addRmvOptionSpaInOrder() {\n  var _this = this;\n\n  //checkbox na option spa\n  var dataForm = JSON.parse(document.getElementById('form-data').dataset.spas);\n  var dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions);\n  var index = this.dataset.index;\n  var id = JSON.parse(this.dataset.array); // Ajout ou supression d'element dans la session\n\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n  var listOptions = [];\n\n  if (this.checked) {\n    for (var i = sessionSpa.length - 1; i >= 0; i--) {\n      if (sessionSpa[i].id == index) {\n        sessionSpa[i].option = [id];\n        listOptions = sessionSpa[i].option;\n        break;\n      }\n    }\n  } else {\n    for (var i = sessionSpa.length - 1; i >= 0; i--) {\n      if (sessionSpa[i].id == index) {\n        sessionSpa[i].option = [];\n        listOptions = sessionSpa[i].option;\n        break;\n      }\n    }\n  }\n\n  var inputList = document.querySelectorAll(\".option-spa-list[data-index=\\'\" + index + \"\\']\");\n  inputList.forEach(function (inputL) {\n    if (_this != inputL) {\n      inputL.checked = false;\n    }\n  });\n  sessionStorage.setItem(\"spa\", JSON.stringify(sessionSpa)); // Ajout des element dans le dom\n\n  htmlOptionSpaOrder(index, dataOption, dataForm, listOptions);\n}\n\nfunction htmlOptionSpaOrder(index, dataOption, dataForm, listOptions) {\n  var ulList = document.getElementById(\"spa-list-\" + index).getElementsByTagName(\"ul\");\n  var liList = \"\"; // [1, \"Décoration romantique\", 20] agencement dans la dataOption\n\n  for (var i = 0; i < listOptions.length; i++) {\n    liList += \"<li class=\\\"li-ambiance\\\">Ambiance : \" + dataOption[listOptions[i]][1] + \"</li>\";\n  }\n\n  ulList[0].innerHTML = liList; // modifier la petite some\n\n  priceTotalForOneSpa(index, dataOption, dataForm); // modifier la somme total\n\n  priceTotalForAllSpa(dataOption, dataForm);\n}\n\nfunction priceTotalForOneSpa(index, dataOption, dataForm) {\n  // [spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte]\n  // [24, 180, 100, 50, 30]\n  var exceptionalDate = [[\"14\", \"02\"], [\"24\", \"12\"], [\"25\", \"12\"], [\"31\", \"12\"]];\n  var zone = JSON.parse(sessionStorage.getItem(\"zone\"));\n  zone = zone.date.split(\"/\"); // MM - DD - YYYY\n\n  var exceptionalPrice = false;\n\n  for (var i = exceptionalDate.length - 1; i >= 0; i--) {\n    if (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]) {\n      exceptionalPrice = true;\n      break;\n    }\n  }\n\n  var spaPrice = document.getElementById(\"spa-price-\" + index);\n  var price = [0, 0];\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    if (sessionSpa[i].id == index) {\n      if (exceptionalPrice) {\n        price[0] += dataForm[sessionSpa[i].time][1]; // prix\n\n        price[1] += dataForm[sessionSpa[i].time][3]; // acompte\n      } else {\n        price[0] += dataForm[sessionSpa[i].time][2]; // prix\n\n        price[1] += dataForm[sessionSpa[i].time][4]; // acompte\n      }\n\n      var spa = sessionSpa[i].option;\n\n      for (var j = spa.length - 1; j >= 0; j--) {\n        price[0] += dataOption[spa[j]][2];\n      }\n\n      spaPrice.innerHTML = \"<li class=\\\"li-prix hidden\\\">Prix : \" + price[0] + \"€ </li><li class=\\\"li-acompte hidden\\\">Acompte : \" + price[1] + \"€</li>\";\n      break;\n    }\n  }\n}\n\nfunction priceTotalForAllSpa(dataOption, dataForm) {\n  var exceptionalDate = [[\"14\", \"02\"], [\"24\", \"12\"], [\"25\", \"12\"], [\"31\", \"12\"]];\n  var zone = JSON.parse(sessionStorage.getItem(\"zone\"));\n  zone = zone.date.split(\"/\"); // MM - DD - YYYY\n\n  var exceptionalPrice = false;\n\n  for (var i = exceptionalDate.length - 1; i >= 0; i--) {\n    if (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]) {\n      exceptionalPrice = true;\n      break;\n    }\n  }\n\n  var spanPriceTotal = document.getElementById(\"spa-price-total\");\n  var prixSomme = [0, 0];\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"));\n  var tmp = \"\";\n\n  for (var i = sessionSpa.length - 1; i >= 0; i--) {\n    // somme heurs des spa\n    if (sessionSpa[i].time != \"\") {\n      if (exceptionalPrice) {\n        prixSomme[0] += dataForm[sessionSpa[i].time][1]; // prix\n\n        prixSomme[1] += dataForm[sessionSpa[i].time][3]; // acompte\n      } else {\n        prixSomme[0] += dataForm[sessionSpa[i].time][2]; // prix\n\n        prixSomme[1] += dataForm[sessionSpa[i].time][4]; // acompte\n      } // some prix pour les options déco\n\n\n      tmp = sessionSpa[i].option;\n\n      for (var j = tmp.length - 1; j >= 0; j--) {\n        prixSomme[0] += dataOption[tmp[j]][2];\n      }\n    }\n  }\n\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n  prestations.priceSpa = prixSomme[0];\n  sessionStorage.setItem(\"prestations\", JSON.stringify(prestations));\n  spanPriceTotal.innerHTML = \" : \" + prixSomme[0] + \" € \";\n  spanPriceTotal.dataset.price = \"[\" + [prixSomme[0], prixSomme[1]] + \"]\"; // Grand prix total\n\n  bigTotalPrice();\n}\n/*==========================================================================*/\n// fonction principale MASSAGE\n\n\nfunction addCategoryMassage() {\n  var id = incrementeInc();\n  var data = document.getElementById('form-data').dataset;\n  var dataMassages = JSON.parse(data.massages);\n  var categories = [];\n\n  if (this.dataset.cat == \"Homme\") {\n    categories = dataMassages[0];\n  } else {\n    categories = dataMassages[1];\n  } // Enregistrement dans la session\n\n\n  var sessionSpa = JSON.parse(sessionStorage.getItem(\"massages\"));\n  sessionSpa.push({\n    id: id,\n    cat: categories[0],\n    sub: \"\",\n    time: \"\"\n  });\n  sessionStorage.setItem(\"massages\", JSON.stringify(sessionSpa));\n  /* ************************************** MILA MODAL NGAMBA */\n\n  if (sessionSpa.length >= 1) {\n    var homme = document.getElementById('addHomme');\n    var femme = document.getElementById('addFemme');\n    homme.addEventListener('click', showAlert);\n    femme.addEventListener('click', showAlert);\n  }\n\n  if (sessionSpa) {\n    var moinhomme = document.getElementById('moinHomme');\n    var moinfemme = document.getElementById('moinFemme');\n    moinhomme.addEventListener('click', deletAlert);\n    moinfemme.addEventListener('click', deletAlert);\n  }\n\n  function deletAlert() {\n    var homme = document.getElementById('addHomme');\n    var femme = document.getElementById('addFemme');\n    homme.removeAttribute(\"data-target\");\n    homme.removeAttribute(\"data-toggle\");\n    femme.removeAttribute(\"data-target\");\n    femme.removeAttribute(\"data-toggle\");\n\n    if (sessionSpa.length > 0) {\n      sessionSpa.splice(-1, 1);\n    }\n  }\n\n  function showAlert() {\n    var homme = document.getElementById('addHomme');\n    var femme = document.getElementById('addFemme');\n\n    if (sessionSpa.length >= 1) {\n      homme.setAttribute(\"data-target\", \"#pushMassage2\");\n      homme.setAttribute(\"data-toggle\", \"modal\");\n      femme.setAttribute(\"data-target\", \"#pushMassage2\");\n      femme.setAttribute(\"data-toggle\", \"modal\");\n    }\n  }\n  /* ************************************** MILA MODAL NGAMBA */\n  // Modification dans le DOM\n\n\n  actualiseDomMassage(this.dataset.cat, id);\n}\n\nfunction actualiseDomMassage(name, id) {\n  var sub = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var time = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  var div = document.createElement('div');\n  div.classList.add('massage-list-' + name);\n\n  if (sub != null && time != null) {\n    div.innerHTML = valueToHtmlMassage(name, id, sub, time);\n  } else {\n    div.innerHTML = valueToHtmlMassage(name, id);\n  }\n\n  document.getElementById(\"massage-order\").innerHTML += \"<div id=\\\"list-order-\" + id + \"\\\" class=\\\"hidden\\\"><div><p class=\\\"msg-duration\\\">\" + name + \"</p></div><div class=\\\"prestation-message\\\"><li class=\\\"li-msgType\\\"></li><div><ul></ul></div></div></div>\";\n  document.getElementById('massage-input').appendChild(div); // nombre de massage pour homme et femme\n\n  numberMassageSelected(name); // evement pour afficher les horaires disponible pour un massages\n\n  var checkRadio = document.querySelectorAll('.massage-su');\n  checkRadio.forEach(function (checkR) {\n    checkR.addEventListener('change', showTimesOnClickMassageSu);\n  }); // evenement pour ajouter un element si une Time est cocher\n\n  var checkRadioList = document.querySelectorAll('.input-time-list');\n  checkRadioList.forEach(function (checkR) {\n    checkR.addEventListener('change', addMassageInOrder);\n  }); // Grand prix total\n\n  bigTotalPrice();\n}\n/* ########################################################################################################################################################################## */\n\n/* ########################################################################################################################################################################## */\n\n\nfunction addMassageInOrder() {\n  var dataForm = JSON.parse(document.getElementById('form-data').dataset.spas);\n  var dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions);\n  var dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages);\n  /*  [id,i,j]  */\n  // <input class=\"input-time-list\" type=\"radio\" value=\"60\" id=\"time164\" name=\"massageSuPrice[4][]\" data-info=\"[4,6,1]\" data-name=\"Homme\">\n\n  var myData = JSON.parse(this.dataset.info); // Modifier la session\n\n  var sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"));\n\n  for (var i = sessionMassage.length - 1; i >= 0; i--) {\n    if (sessionMassage[i].id == myData[0]) {\n      sessionMassage[i].time = myData[2];\n      numberAtOrderBtn();\n    }\n  }\n\n  sessionStorage.setItem(\"massages\", JSON.stringify(sessionMassage)); // Calculer le prix et ajouter dans le dom\n  // priceTotalForOneMassage(this.dataset.name,myData,this.dataset.sub)\n\n  priceTotalForOneMassage(dataMassages, myData[0]);\n  priceTotalForAllMassage(dataMassages);\n}\n\nfunction priceTotalForOneMassage(dataMassages, myData) {\n  var exceptionalDate = [[\"14\", \"02\"], [\"24\", \"12\"], [\"25\", \"12\"], [\"31\", \"12\"]];\n  var zone = JSON.parse(sessionStorage.getItem(\"zone\"));\n  zone = zone.date.split(\"/\"); // MM - DD - YYYY\n\n  var exceptionalPrice = false;\n\n  for (var i = exceptionalDate.length - 1; i >= 0; i--) {\n    if (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]) {\n      exceptionalPrice = true;\n      break;\n    }\n  }\n\n  var sub = \"\";\n  var time = \"\";\n  var cat = \"\";\n  var sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"));\n\n  for (var i = sessionMassage.length - 1; i >= 0; i--) {\n    if (sessionMassage[i].id == myData) {\n      sub = sessionMassage[i].sub;\n      time = sessionMassage[i].time;\n      cat = sessionMassage[i].cat;\n      break;\n    }\n  }\n\n  var categories = [];\n\n  if (cat == \"Homme\") {\n    categories = dataMassages[0];\n  } else {\n    categories = dataMassages[1];\n  }\n\n  var divMassage = document.getElementById(\"list-order-\" + myData);\n  document.getElementById(\"massage-order\").classList.remove('hidden');\n  divMassage.classList.remove('hidden');\n  divMassage.getElementsByTagName(\"li\")[0].innerHTML = categories[1][sub][0]; //  [30, 70, 30, 50, 20]\n\n  if (exceptionalPrice) {\n    divMassage.getElementsByTagName(\"ul\")[0].innerHTML = \"<li class=\\\"li-msgPrix hidden\\\">Prix: \" + categories[1][sub][1][time][1] + \"€</li><li class=\\\"li-msgAcompte hidden\\\">Acompte: \" + categories[1][sub][1][time][2] + \"€</li>\";\n  } else {\n    divMassage.getElementsByTagName(\"ul\")[0].innerHTML = \"<li class=\\\"li-msgPrix hidden\\\">Prix: \" + categories[1][sub][1][time][3] + \"€</li><li class=\\\"li-msgAcompte hidden\\\">Acompte: \" + categories[1][sub][1][time][4] + \"€</li>\";\n  }\n}\n\nfunction priceTotalForAllMassage(dataMassages) {\n  var exceptionalDate = [[\"14\", \"02\"], [\"24\", \"12\"], [\"25\", \"12\"], [\"31\", \"12\"]];\n  var zone = JSON.parse(sessionStorage.getItem(\"zone\"));\n  zone = zone.date.split(\"/\"); // MM - DD - YYYY\n\n  var exceptionalPrice = false;\n\n  for (var i = exceptionalDate.length - 1; i >= 0; i--) {\n    if (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]) {\n      exceptionalPrice = true;\n      break;\n    }\n  }\n\n  var sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"));\n  var price = 0;\n  var acompte = 0;\n\n  for (var i = sessionMassage.length - 1; i >= 0; i--) {\n    if (typeof sessionMassage[i].sub == \"number\" && typeof sessionMassage[i].time == \"number\") {\n      var categories = [];\n\n      if (sessionMassage[i].cat == \"Homme\") {\n        categories = dataMassages[0];\n      } else {\n        categories = dataMassages[1];\n      }\n\n      if (exceptionalPrice) {\n        price += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][1];\n        acompte += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][2];\n      } else {\n        price += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][3];\n        acompte += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][4];\n      }\n    }\n  }\n\n  document.getElementById(\"massage-price-total\").innerHTML = \" : \" + price + \"€\" + acompte + \"€\";\n  document.getElementById(\"massage-price-total\").dataset.price = \"[\" + [price, acompte] + \"]\";\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n  prestations.priceMassage = price;\n  sessionStorage.setItem(\"prestations\", JSON.stringify(prestations));\n  document.getElementById(\"massage-price-total\").innerHTML = \" : \" + price + \" € \";\n\n  if (price == 0 && acompte == 0) {\n    document.getElementById(\"massage-order\").classList.add('hidden');\n  } // Grand prix total\n\n\n  bigTotalPrice();\n}\n/* ########################################################################################################################################################## */\n\n/* ########################################################################################################################################################################## */\n\n\nfunction removeCategoryMassage() {\n  var dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages); // Enregistrement dans la session\n\n  var sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"));\n\n  for (var i = sessionMassage.length - 1; i >= 0; i--) {\n    if (sessionMassage[i].cat == this.dataset.cat) {\n      document.getElementById(\"list-order-\" + sessionMassage[i].id).remove();\n      sessionMassage.splice(i, 1);\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"massages\", JSON.stringify(sessionMassage)); // Modification dans le DOM\n\n  var list = document.getElementsByClassName('massage-list-' + this.dataset.cat);\n\n  if (list.length > 0) {\n    list[list.length - 1].remove();\n  } // nombre de massage pour homme et femme\n\n\n  numberMassageSelected(this.dataset.cat);\n  numberAtOrderBtn();\n  priceTotalForAllMassage(dataMassages); // Grand prix total\n\n  bigTotalPrice();\n}\n/*==========================================================================*/\n// fonction principale CADEAU\n\n\nfunction removeCadeau() {\n  var id = JSON.parse(this.dataset.id);\n  var cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n\n  for (var i = cadeau.length - 1; i >= 0; i--) {\n    if (cadeau[i][0] == id) {\n      cadeau[i][1]--;\n      document.getElementById(id + \"-nbr\").innerHTML = cadeau[i][1];\n\n      if (cadeau[i][1] == 0) {\n        cadeau.splice(i, 1);\n      }\n\n      break;\n    }\n  }\n\n  sessionStorage.setItem(\"cadeau\", JSON.stringify(cadeau));\n  numberAtOrderBtn();\n  var changeCadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n  valueInInput = \"\";\n\n  for (var i = changeCadeau.length - 1; i >= 0; i--) {\n    valueInInput += changeCadeau[i][0] + \"-\" + changeCadeau[i][1] + \"|\";\n  }\n\n  document.getElementById(\"cadeau-id\").value = valueInInput; // calcul du prix\n\n  priceForAllCadeau();\n}\n\nfunction aDDCadeau() {\n  var id = JSON.parse(this.dataset.id);\n  var cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n  var test = true;\n\n  for (var i = cadeau.length - 1; i >= 0; i--) {\n    if (cadeau[i][0] == id) {\n      test = false;\n      cadeau[i][1]++;\n      document.getElementById(id + \"-nbr\").innerHTML = cadeau[i][1];\n      break;\n    }\n  }\n\n  if (test) {\n    cadeau.push([id, 1, this.dataset.name, this.dataset.price]);\n    document.getElementById(id + \"-nbr\").innerHTML = 1;\n  }\n\n  sessionStorage.setItem(\"cadeau\", JSON.stringify(cadeau));\n  numberAtOrderBtn();\n  var changeCadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n  valueInInput = \"\";\n\n  for (var i = changeCadeau.length - 1; i >= 0; i--) {\n    valueInInput += changeCadeau[i][0] + \"-\" + changeCadeau[i][1] + \"|\";\n  }\n\n  document.getElementById(\"cadeau-id\").value = valueInInput; // calcul du prix\n\n  priceForAllCadeau();\n}\n\nfunction priceForAllCadeau() {\n  var addCadeau = document.querySelectorAll(\".cadeau-add\");\n  infoCadeau = [];\n  addCadeau.forEach(function (listCadeau) {\n    infoCadeau.push([JSON.parse(listCadeau.dataset.id), listCadeau.dataset.name, JSON.parse(listCadeau.dataset.price)]);\n  });\n  var cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n  var orderCadeau = document.getElementById(\"cadeau-order\");\n  var totalPrice = 0;\n  var elementDom = \"<ul>\";\n\n  for (var i = 0; i < cadeau.length; i++) {\n    for (var j = infoCadeau.length - 1; j >= 0; j--) {\n      if (cadeau[i][0] == infoCadeau[j][0]) {\n        totalPrice += cadeau[i][1] * infoCadeau[j][2];\n        /* isany * prix */\n\n        /* infoCadeau[i][1] anarany*/\n\n        elementDom += \"<li class=\\\"li-cadeau\\\">\" + infoCadeau[i][1] + \"<div class=\\\"nbr-cadeau\\\"> Nombres : \" + cadeau[i][1] + \" <br> Prix : \" + cadeau[i][1] * infoCadeau[j][2] + \" € </br></li>\";\n        break;\n      }\n    }\n  }\n\n  if (totalPrice == 0) {\n    orderCadeau.classList.remove(\"hidden\");\n    orderCadeau.classList.add(\"hidden\");\n    document.getElementById(\"cadeau-price-total\").innerHTML = \"\";\n  } else {\n    orderCadeau.classList.remove(\"hidden\");\n    document.getElementById(\"cadeau-price-total\").innerHTML = totalPrice;\n    orderCadeau.getElementsByTagName(\"div\")[0].innerHTML = elementDom + \"</ul>\";\n  } // Grand prix total\n\n\n  bigTotalPrice();\n}\n\nfunction bigTotalPrice() {\n  var spa = document.getElementById(\"spa-price-total\").dataset.price;\n  var massage = document.getElementById(\"massage-price-total\").dataset.price;\n\n  if ((spa == \"\" || spa == \"[0,0]\") && (massage == \"\" || massage == \"[0,0]\")) {\n    document.getElementById(\"empty-order\").classList.remove(\"hidden\");\n  } else {\n    document.getElementById(\"empty-order\").classList.add(\"hidden\");\n  }\n\n  if (spa != \"\") {\n    spa = JSON.parse(spa);\n  } else {\n    spa = [0, 0];\n  }\n\n  if (massage != \"\") {\n    massage = JSON.parse(massage);\n  } else {\n    massage = [0, 0];\n  }\n\n  var code_promo = 0;\n  var prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n\n  if (prestations.code_promo) {\n    code_promo = prestations.code_promo[1];\n  }\n\n  var somePrice = spa[0] + massage[0];\n  var someAcompte = spa[1] + massage[1];\n\n  if (somePrice > 0) {\n    somePrice -= code_promo;\n  }\n\n  if (someAcompte > 0) {\n    someAcompte -= code_promo;\n  }\n\n  document.getElementById(\"total-price\").innerHTML = somePrice;\n  document.getElementById(\"total-acompte\").innerHTML = someAcompte;\n} // pour l'enregistrement des donné dans le panier du boutons\n\n\nfunction numberAtOrderBtn() {\n  var spa = JSON.parse(sessionStorage.getItem(\"spa\"));\n  var massages = JSON.parse(sessionStorage.getItem(\"massages\"));\n  var cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"));\n  var number = 0;\n\n  if (spa) {\n    for (var i = spa.length - 1; i >= 0; i--) {\n      if (spa[i].time != \"\") {\n        number++;\n      }\n    }\n  }\n\n  if (massages) {\n    for (var i = massages.length - 1; i >= 0; i--) {\n      if (typeof massages[i].sub != \"string\") {\n        number++;\n      }\n    }\n  }\n\n  if (cadeau) {\n    for (var i = cadeau.length - 1; i >= 0; i--) {\n      number += cadeau[i][1];\n    }\n  }\n\n  document.getElementById(\"number-cart-ok\").innerHTML = number;\n}\n\ndocument.getElementById(\"nex-submi-tag\").addEventListener('click', submitFormulaire);\n\nfunction submitFormulaire() {\n  if (true) {\n    document.getElementById(\"form-data\").submit();\n  } else {\n    document.getElementById(\"loc-spa-fafana\").classList.add(\"active\");\n    document.getElementsByClassName(\"accordion-body js-accordion-body\").style.display = \"block\";\n  }\n}\n\nfunction changePromoCode(prestations) {\n  document.getElementById(\"alert-code\").classList.remove(\"hidden\");\n  document.getElementById(\"form-promo-code\").classList.add(\"hidden\");\n  document.getElementById(\"alert-code\").innerHTML = \"Votre code promo \" + prestations.code_promo[0] + \" est validé avec succès.\" + \" Vous avez gagné un reduction de \" + prestations.code_promo[1] + \"€ pour l'acompte total à payer!\";\n} // document.getElementById('submi-tag').onCl\n// LIGNE 580 RA ILAINA ILAY ACCOMPTE\n// spanPriceTotal.innerHTML = \"prix: \"+prixSomme[0]+\"€ acompte: \"+prixSomme[1]+\"€\"\n// LIGNE 712 RA ILAINA ILAY ACCOMPTE\n// document.getElementById(\"massage-price-total\").innerHTML = \"prix: \"+price+\" € \"+acompte+\"€\"\n\n/*\n\n\n\n*/","map":{"version":3,"sources":["/Users/admin/Desktop/coconingspa/cocooningspa/app/javascript/packs/orders_index.js"],"names":["scriptPrincipal","removeSpa","document","getElementById","addSpa","addEventListener","removeSpaList","addSpaList","buttonRmvs","querySelectorAll","forEach","buttonRmv","removeCategoryMassage","buttonAdds","buttonAdd","addCategoryMassage","rmvCadeau","rmv","removeCadeau","addCadeau","add","aDDCadeau","showDepartementIfFrance","addPraticient","addPraticientAtSession","addHoursInPrestation","verifySession","isHasSpaMassage","spa","sessionStorage","getItem","massages","cadeau","prestations","jsonPresta","JSON","parse","initSession","i","length","id","time","splice","setItem","stringify","cat","sub","addDomIndex","code_promo","changePromoCode","dataForm","dataset","spas","dataOption","spaoptions","dataMassages","tmpTime","actualiseDomSpa","option","info","querySelector","value","htmlTimeSpaOrder","htmlOptionSpaOrder","heureSpa","actualiseDomMassage","priceTotalForOneMassage","priceTotalForAllMassage","heureMassage","valueInInput","innerHTML","priceForAllCadeau","praticien","undefined","listPratitiens","checked","x","input_dptm","div_dptm","removeAttribute","setAttribute","classList","incrementeInc","inc","changeLogement","sessionSpa","index","changeInstallation","changeTypeSpa","valueToHtmlSpa","data","dataSpas","dataSpaoptions","typeSpa","includes","isPresent","key","numberSpaSelected","list","getElementsByClassName","numberMassageSelected","name","valueToHtmlMassage","categories","heurs","htmlSub","htmlTime","j","showTimesOnClickMassageSu","myData","timeListAll","timeList","inputList","sessionMassage","parentElement","getElementsByTagName","listCheck","className","bigTotalPrice","div","createElement","appendChild","timeSpa","tSpa","addRmvTimSpaInOrder","optionSpa","oSpa","addRmvOptionSpaInOrder","logement","installation","log","inst","type","addSpaInOrder","push","pop","numberAtOrderBtn","remove","rmvSpaInOrder","priceTotalForAllSpa","divOrder","a","array","priceTotalForOneSpa","listOptions","inputL","ulList","liList","exceptionalDate","zone","date","split","exceptionalPrice","spaPrice","price","spanPriceTotal","prixSomme","tmp","priceSpa","homme","femme","showAlert","moinhomme","moinfemme","deletAlert","checkRadio","checkR","checkRadioList","addMassageInOrder","divMassage","acompte","priceMassage","changeCadeau","test","infoCadeau","listCadeau","orderCadeau","totalPrice","elementDom","massage","somePrice","someAcompte","number","submitFormulaire","submit","style","display"],"mappings":"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","sourcesContent":["// [spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte]\n// [price.duration,price.exceptional_price,price.exceptional_acompte,price.ordinary_price,price.ordinary_acompte]\nscriptPrincipal()\nfunction scriptPrincipal(){\n\t/*==========================================================================*/\n\t/*~~~~~~~~~~~~~~~~~~~~~~~~~SPA~~~~~~~~~~~~~~~~~~~~~~~~~*/\n\tlet removeSpa = document.getElementById(\"remove-spa\")\n\tlet addSpa = document.getElementById(\"add-spa\")\n\tremoveSpa.addEventListener('click',removeSpaList)\n\taddSpa.addEventListener('click',addSpaList)\n\t/*==========================================================================*/\n\t/*~~~~~~~~~~~~~~~~~~~~~~~Massage~~~~~~~~~~~~~~~~~~~~~~~*/\n\tlet buttonRmvs = document.querySelectorAll('.remove-massage');\n\tbuttonRmvs.forEach(buttonRmv => {\n\t\tbuttonRmv.addEventListener('click',removeCategoryMassage);\n\t});\n\n\tlet buttonAdds = document.querySelectorAll('.add-massage');\n\tbuttonAdds.forEach(buttonAdd => {\n\t\tbuttonAdd.addEventListener('click',addCategoryMassage);\n\t});\n\t/*==========================================================================*/\n\t/*~~~~~~~~~~~~~~~~~~~~~~~Cadeau~~~~~~~~~~~~~~~~~~~~~~~*/\n\tlet rmvCadeau = document.querySelectorAll(\".cadeau-rmv\")\n\trmvCadeau.forEach(rmv => {\n\t\trmv.addEventListener('click',removeCadeau);\n\t});\n\n\tlet addCadeau = document.querySelectorAll(\".cadeau-add\")\n\taddCadeau.forEach(add => {\n\t\tadd.addEventListener('click',aDDCadeau);\n\t});\n\t/*==========================================================================*/\n\t/*~~~~~~~~~~~~Date Heurs Pays Departement Praticient ~~~~~~~~~~~~~~~~~*/\n\tdocument.getElementById(\"country-choice\").addEventListener(\"change\", showDepartementIfFrance);\n\t// praticien\n\tlet addPraticient = document.querySelectorAll(\".praticien-list\")\n\taddPraticient.forEach(add => {\n\t\tadd.addEventListener('change',addPraticientAtSession);\n\t});\n\n\tdocument.getElementById(\"heure-spa\").addEventListener(\"change\",addHoursInPrestation)\n\n\tdocument.getElementById(\"heure-massage\").addEventListener(\"change\",addHoursInPrestation)\n\n\t/*==========================================================================*/\n\t/*~~~~~~~~~~~~Verifier si il y a un truc dans la session ~~~~~~~~~~~~~*/\n\tverifySession()\n}\n// \n//\n/*==========================================================================*/\n// verifier si la session est vide ou pas\nfunction verifySession(){\n\t// ajouter le pays dans la session\n\tlet isHasSpaMassage = false\n\tlet spa = sessionStorage.getItem(\"spa\")\n\tlet massages = sessionStorage.getItem(\"massages\")\n\tlet cadeau = sessionStorage.getItem(\"cadeau\")\n\t// prestations.pays = \"\" // prestations.departement = \"\" // prestations.date = \"\" // prestations.heurs = \"\" // prestations.praticient = \"\"\t\n\tlet prestations = sessionStorage.getItem(\"prestations\")\n\tlet jsonPresta = JSON.parse(prestations);\n\tif ( (spa == null || spa == \"\") && (massages == null || massages == \"\") ){\n\t\tinitSession()\n\t\treturn\n\t}else{\n\t\tif (spa != null && spa != \"\") {\n\t\t\tspa = JSON.parse(spa)\n\t\t\tfor (var i = spa.length - 1; i >= 0; i--) {\n\t\t\t\tif (spa[i].id == null || spa[i].time == \"\") {\n\t\t\t\t\tspa.splice(i,1) // null daholo ny spa ato\n\t\t\t\t}else{\n\t\t\t\t\tisHasSpaMassage = true //nisy spa tsy null le aza\n\t\t\t\t}\n\t\t\t}\n\t\t\tsessionStorage.setItem(\"spa\",JSON.stringify(spa))\n\t\t}\n\t\tif ( massages != null && massages != \"\") {\n\t\t\tmassages = JSON.parse(massages)\n\t\t\tfor (var i = massages.length - 1; i >= 0; i--) {\n\t\t\t\tif (massages[i].id == null || massages[i].cat == \"\" || typeof(massages[i].sub) == \"string\" || typeof(massages[i].time) == \"string\"){\n\t\t\t\t\tmassages.splice(i,1) // null daholo ny massages\n\t\t\t\t}else{\n\t\t\t\t\tisHasSpaMassage = true // nisy massages tsy null le aza\n\t\t\t\t}\n\t\t\t}\n\t\t\tsessionStorage.setItem(\"massages\",JSON.stringify(massages))\n\t\t}\n\t}\n\tif (isHasSpaMassage) {\n\t\taddDomIndex()\n\t\tif (jsonPresta.code_promo) {\n\t\t\tchangePromoCode(jsonPresta);\n\t\t}\n\t}else{\n\t\tinitSession()\n\t}\n}\n\n// initialiser la session\nfunction initSession(){\n\tsessionStorage.setItem(\"prestations\",\"{}\")\n\tsessionStorage.setItem(\"spa\",\"[]\")\n\tsessionStorage.setItem(\"massages\",\"[]\")\n\tsessionStorage.setItem(\"cadeau\",\"[]\")\n\tsessionStorage.setItem(\"inc\",\"0\")\n}\n/*==========================================================================*/\n// remettre les elements si un l'user a actualisé\nfunction addDomIndex(){\n\tlet dataForm = JSON.parse(document.getElementById('form-data').dataset.spas)\n\tlet dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions)\n\tlet dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages)\n\tlet spa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tlet massages = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tlet cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\t// prestations.pays = \"\" // prestations.departement = \"\" // prestations.date = \"\" // prestations.heurs = \"\" // prestations.praticient = \"\"\t\n\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"))\n\t// Ajouter les spa selectionné dans le dom\n\tlet tmpTime = \"\"\n\tif (0 < spa.length) {\n\t\tfor (var i = 0; i < spa.length ; i++) {\n\t\t\tactualiseDomSpa(spa[i].id,[spa[i].id,spa[i].time,spa[i].option,spa[i].info])\n\t\t\ttmpTime = document.querySelector(\"input[data-index=\\'\"+spa[i].id+\"\\'][data-array=\\'\"+spa[i].time+\"\\'].time-spa-list\").value\n\t\t\thtmlTimeSpaOrder(tmpTime,spa[i].id,dataOption,dataForm)\n\t\t\thtmlOptionSpaOrder(spa[i].id,dataOption,dataForm,spa[i].option)\n\t\t}\n\t\tdocument.getElementById(\"heure-spa\").value = prestations.heureSpa\n\t}\n\t// Ajouter les massages selectionné dans le dom\n\tif (massages.length != 0) {\n\t\tfor (var i = 0; i < massages.length ; i++) {\n\t\t\tactualiseDomMassage(massages[i].cat,massages[i].id,massages[i].sub,massages[i].time)\n\t\t\tpriceTotalForOneMassage(dataMassages,massages[i].id)\n\t\t\tpriceTotalForAllMassage(dataMassages)\n\t\t}\n\t\tdocument.getElementById(\"heure-massage\").value = prestations.heureMassage\n\t}\n\t// Ajouter le cadeau selectionné dans le dom\n\tif (cadeau.length != 0) {\n\t\tvalueInInput = \"\"\n\t\tfor (var i = 0; i < cadeau.length ; i++) {\n\t\t\t// [[6,8],[7,3],[8,2],[9,1]]\n\t\t\tdocument.getElementById(cadeau[i][0]+\"-nbr\").innerHTML = cadeau[i][1]\n\t\t\tvalueInInput += cadeau[i][0]+\"-\"+cadeau[i][1]+\"|\"\n\t\t}\n\t\tdocument.getElementById(\"cadeau-id\").value = valueInInput\n\t\tpriceForAllCadeau()\n\t}\n\t// Ajouter les information sur la zone et type de praticient\n\tif (prestations.praticien != undefined){\n\t\tlet listPratitiens = document.querySelectorAll(\".praticien-list\")\n\t\tfor (var i = listPratitiens.length - 1; i >= 0; i--) {\n\t\t\tif(listPratitiens[i].value == prestations.praticien){\n\t\t\t\tlistPratitiens[i].checked = true\n\t\t\t}\n\t\t}\n\t}\n}\n/*==========================================================================*/\n\t// les fonctions concernatant Date Heurs Pays Departement Praticient\n\tfunction showDepartementIfFrance() {\n\t\tvar x = this.value\n\t\tvar input_dptm = document.getElementById(\"Departement\")\n\t\tvar div_dptm = document.getElementById(\"list-department\")\n\t\tif (x == \"France\") {\n\t\t\tinput_dptm.removeAttribute(\"disabled\")\n\t\t\tdiv_dptm.removeAttribute(\"class\")\n\t\t}else{\n\t\t\tinput_dptm.setAttribute(\"disabled\",\"disabled\")\n\t\t\tdiv_dptm.classList.add(\"hidden\")\n\t\t}\n\t}\n\t// pour le praticien \n\tfunction addPraticientAtSession(){\n\t\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"))\n\t\tprestations.praticien = this.value\n\t\tsessionStorage.setItem(\"prestations\",JSON.stringify(prestations))\n\t}\n\n\t/*==========================================================================*/\n\t// les fonctions primaire utilisé dans SPA et massage\n\tfunction incrementeInc(){ /*incremente la valeur inc pour les params*/\n\t\tlet inc = JSON.parse(sessionStorage.getItem(\"inc\"))\n\t\tinc++\n\t\tsessionStorage.setItem(\"inc\",JSON.stringify(inc))\n\t\treturn inc\n\t}\n\t/*==========================================================================*/\n\t// les fonctions primaire SPA\n// [logemtn,installation,eau]\nfunction changeLogement (){\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\tif (sessionSpa[i].id == this.dataset.index) {\n\t\t\tsessionSpa[i].info[0] = this.value\n\t\t\tbreak\n\t\t}\n\t}\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n}\nfunction changeInstallation (){\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\tif (sessionSpa[i].id == this.dataset.index) {\n\t\t\tsessionSpa[i].info[1] = this.value\n\t\t\tbreak\n\t\t}\n\t}\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n}\nfunction changeTypeSpa (){\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\tif (sessionSpa[i].id == this.dataset.index) {\n\t\t\tsessionSpa[i].info[2] = this.value\n\t\t\tbreak\n\t\t}\n\t}\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n}\n\n// \"time\":\"1\",\"option\":[1,2,3]}]\nfunction valueToHtmlSpa(id,time=null,option=\"\",info=\"\"){ /* code html pour l'ajout d'un spa */\nlet data = document.getElementById('form-data').dataset\nlet dataSpas = JSON.parse(data.spas)\nlet dataSpaoptions = JSON.parse(data.spaoptions)\n\t// spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte\n\tlet typeSpa = \"<div class='col-sm-3'><h4><center class=\\\"titleSpa dureTitle\\\">Durée location</center></h4>\"\n\tfor (var i = 0; i < dataSpas.length ; i++) {\n\t\tif (time == i) {\n\t\t\ttypeSpa += \"<div class=\\\"duree-spa\\\"><input class=\\\"time-spa-list\\\" type=\\\"radio\\\" id=\\\"\"+id+\"h\"+dataSpas[i][0]+\"\\\" checked name=\\\"timeSpa[\"+id+\"][]\\\" value=\\\"\"+ dataSpas[i][0] +\"\\\" data-prices=\\\"[\"+dataSpas[i][1]+\",\"+dataSpas[i][2]+\"]\\\" data-acompte=\\\"[\"+dataSpas[i][3]+\",\"+dataSpas[i][4]+\"]\\\" data-index=\\\"\"+id+\"\\\" data-array=\\\"\"+i+\"\\\"><label for=\\\"\"+id+\"h\"+dataSpas[i][0]+\"\\\" class=\\\"label-spa\\\">\"+ dataSpas[i][0] +\"h</label></div>\"\n\t\t}else{\n\t\t\ttypeSpa += \"<div class=\\\"duree-spa\\\"><input class=\\\"time-spa-list\\\" type=\\\"radio\\\" id=\\\"\"+id+\"h\"+dataSpas[i][0]+\"\\\" name=\\\"timeSpa[\"+id+\"][]\\\" value=\\\"\"+ dataSpas[i][0] +\"\\\" data-prices=\\\"[\"+dataSpas[i][1]+\",\"+dataSpas[i][2]+\"]\\\" data-acompte=\\\"[\"+dataSpas[i][3]+\",\"+dataSpas[i][4]+\"]\\\" data-index=\\\"\"+id+\"\\\" data-array=\\\"\"+i+\"\\\"><label for=\\\"\"+id+\"h\"+dataSpas[i][0]+\"\\\" class=\\\"label-spa\\\">\"+ dataSpas[i][0] +\"h</label></div>\"\n\t\t}\n\t}\n\ttypeSpa += \"</div><div class='col-sm-4 ambianceresponsive'><h4><center class=\\\"titleSpa\\\">Ambiance</center></h4>\"\n\tfor (var i = 0; i < dataSpaoptions.length ; i++) {\n\t\tif (option.includes(i)) {\n\t\t\ttypeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" checked name=\\\"optionSpa[\"+id+\"][]\\\" value=\\\"\"+dataSpaoptions[i][1]+\"\\\" id=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" data-array=\\\"\"+i+\"\\\" data-price=\\\"\"+dataSpaoptions[i][2]+\"\\\" data-index=\\\"\"+id+\"\\\" ><label for=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" class=\\\"label-option-spa\\\">\"+dataSpaoptions[i][1]+\"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\"+dataSpaoptions[i][1]+\"\\\"></i></div>\"\n\t\t}else{\n\t\t\tif (typeof(option)!=\"string\") {\n\t\t\t\ttypeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" name=\\\"optionSpa[\"+id+\"][]\\\" value=\\\"\"+dataSpaoptions[i][1]+\"\\\" id=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" data-array=\\\"\"+i+\"\\\" data-price=\\\"\"+dataSpaoptions[i][2]+\"\\\" data-index=\\\"\"+id+\"\\\" ><label for=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" class=\\\"label-option-spa\\\">\"+dataSpaoptions[i][1]+\"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\"+dataSpaoptions[i][1]+\"\\\"></i></div>\"\n\t\t\t}else{\n\t\t\t\ttypeSpa += \"<div class=\\\"list-ambiance\\\"><input class=\\\"option-spa-list\\\" type=\\\"checkbox\\\" name=\\\"optionSpa[\"+id+\"][]\\\" value=\\\"\"+dataSpaoptions[i][1]+\"\\\" id=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" data-array=\\\"\"+i+\"\\\" data-price=\\\"\"+dataSpaoptions[i][2]+\"\\\" data-index=\\\"\"+id+\"\\\" disabled ><label for=\\\"opt\"+dataSpaoptions[i][0]+\"\"+id+\"\\\" class=\\\"label-option-spa\\\">\"+dataSpaoptions[i][1]+\"</label><i class=\\\"fa fa-question-circle questionMarkSpa\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#\"+dataSpaoptions[i][1]+\"\\\"></i></div>\"\n\t\t\t}\n\t\t}\n\t}\n\t// [logemtn,installation,eau]\n\tfunction isPresent(key,value){\n\t\tif (key == value) {\n\t\t\treturn \"selected=\\\"selected\\\"\"\n\t\t}else{\n\t\t\treturn \"\"\t\n\t\t}\n\t}\n\tif (info!=\"\") {\n\t\ttypeSpa += \"</div><div class=\\\"col-sm-5 fin-spa\\\"><h4><center class=\\\"titleSpa informationTitle\\\">Informations sur la location</center></h4><br><div class=\\\"infoSpa\\\"><label class=\\\"label-info-spa\\\" for=\\\"logement\"+id+\"\\\">Type de logement</label><select class=\\\"logement selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"logement\"+id+\"\\\" ><option value=\\\"Appartement\\\" \"+ isPresent(info[0],\"Appartement\") +\">Appartement</option><option value=\\\"Villa - Maison\\\" \"+ isPresent(info[0],\"Villa - Maison\") +\" >Villa - Maison</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"installation\"+id+\"\\\" class=\\\"label-info-spa\\\">Type d'installation</label><select class=\\\"installation selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"installation\"+id+\"\\\"><option value=\\\"Intérieur\\\" \"+ isPresent(info[1],\"Intérieur\") +\">Intérieur</option><option value=\\\"Extérieur\\\" \"+ isPresent(info[1],\"Extérieur\") +\">Extérieur</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"eau\"+id+\"\\\" class=\\\"label-info-spa\\\">Système d'eau</label><select class=\\\"typeSpa selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"eau\"+id+\"\\\" ><option value=\\\"Cumulus - Ballon d'eau (eau chaude limitée)\\\"  \"+ isPresent(info[2],\"Cumulus - Ballon d'eau (eau chaude limitée)\") +\">Cumulus - Ballon d\\'eau (eau chaude limitée)</option><option value=\\\"Chaudière (eau chaude continue)\\\" \"+ isPresent(info[2],\"Chaudière (eau chaude continue)\") +\" >Chaudière (eau chaude continue)</option></select></div></div>\"\n\t}else{\n\t\ttypeSpa += \"</div><div class=\\\"col-sm-5 fin-spa\\\"><h4><center class=\\\"titleSpa informationTitle\\\">Informations sur la location</center></h4><br><div class=\\\"infoSpa\\\"><label class=\\\"label-info-spa\\\" for=\\\"logement\"+id+\"\\\">Type de logement</label><select class=\\\"logement selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"logement\"+id+\"\\\" ><option value=\\\"Appartement\\\" selected=\\\"selected\\\">Appartement</option><option value=\\\"Villa - Maison\\\">Villa - Maison</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"installation\"+id+\"\\\" class=\\\"label-info-spa\\\">Type d'installation</label><select class=\\\"installation selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"installation\"+id+\"\\\"><option value=\\\"Intérieur\\\" selected=\\\"selected\\\">Intérieur</option><option value=\\\"Extérieur\\\">Extérieur</option></select></div><div class=\\\"infoSpa\\\"><label for=\\\"eau\"+id+\"\\\" class=\\\"label-info-spa\\\">Système d'eau</label><select class=\\\"typeSpa selectElement select-dro\\\" data-index=\\\"\"+id+\"\\\" name=\\\"typeSpa[\"+id+\"][]\\\" id=\\\"eau\"+id+\"\\\" ><option value=\\\"Cumulus - Ballon d'eau (eau chaude limitée)\\\" selected=\\\"selected\\\">Cumulus - Ballon d\\'eau (eau chaude limitée)</option><option value=\\\"Chaudière (eau chaude continue)\\\">Chaudière (eau chaude continue)</option></select></div></div>\"\n\t}\n\treturn typeSpa\n}\n\n\nfunction numberSpaSelected(){\n\tlet list = document.getElementsByClassName(\"spa-list-prestations\")\n\tdocument.getElementById(\"number-spa\").innerHTML = list.length\n}\n\n/*==========================================================================*/\n\t// les fonctions primaire MASSAGE\n\tfunction numberMassageSelected(name) {\n\t\tlet list = document.getElementsByClassName(\"massage-list-\"+name)\n\t\tdocument.getElementById(\"number-\"+name).innerHTML = list.length\n\t}\n\n// [{\"id\":1,\"cat\":\"Homme\",\"sub\":3,\"time\":1},{\"id\":2,\"cat\":\"Femme\",\"sub\":0,\"time\":1}]\nfunction valueToHtmlMassage(name,id,sub=null,time=null){\n\tlet data = document.getElementById('form-data').dataset\n\tlet dataMassages = JSON.parse(data.massages)\n\n\tlet categories = []\n\tif ( name == \"Homme\") {\n\t\tcategories = dataMassages[0]\n\t}else{\n\t\tcategories = dataMassages[1]\n\t}\n\tlet heurs = []\n\tlet htmlSub = \"\"\n\tlet htmlTime = \"\"\n\tfor (var i = 0; i < categories[1].length ; i++) {\n\t\thtmlSub += \"<div class=\\\"massage-type\\\">\"\n\t\tif (i == 0) {\n\t\t\thtmlSub += \"<input type=\\\"text\\\" name=\\\"massageSu[\"+id+\"][]\\\" value=\\\"\"+ name +\"\\\" class=\\\"hidden\\\">\"\n\t\t}\n\t\tif (sub != null && sub == i) {\n\t\t\thtmlSub += \"<input type=\\\"checkbox\\\" value=\\\"\"+ categories[1][i][0] +\"\\\" checked id=\\\"sub\"+ i +\"\"+ id +\"\\\" class=\\\"massage-su\\\" name=\\\"massageSu[\"+id+\"][]\\\" data-info=\\\"[\"+ [id,i] +\"]\\\"><label class=\\\"label-massage\\\" for=\\\"sub\"+ i +\"\"+ id +\"\\\"> \"+ categories[1][i][0] +\" </label><i class=\\\"fa fa-question-circle questionMark\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#modal\"+ i +\"\"+ id +\"\\\"></i>\"\n\t\t\thtmlTime += \"<div class=\\\"times-massage\\\" data-info=\\\"[\"+ [id,i] +\"]\\\" ><ul>\"\n\t\t}else{\n\t\t\thtmlSub += \"<input type=\\\"checkbox\\\" value=\\\"\"+ categories[1][i][0] +\"\\\" id=\\\"sub\"+ i +\"\"+ id +\"\\\" class=\\\"massage-su\\\" name=\\\"massageSu[\"+id+\"][]\\\" data-info=\\\"[\"+ [id,i] +\"]\\\"><label class=\\\"label-massage\\\" for=\\\"sub\"+ i +\"\"+ id +\"\\\"> \"+ categories[1][i][0] +\" </label><i class=\\\"fa fa-question-circle questionMark\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"modal\\\" data-target=\\\"#modal\"+ i +\"\"+ id +\"\\\"></i>\"\n\t\t\thtmlTime += \"<div class=\\\"times-massage hidden\\\" data-info=\\\"[\"+ [id,i] +\"]\\\" ><ul>\"\n\t\t}\n\t\thtmlSub += \"</div>\"\n\t\theurs = categories[1][i][1] // liste des heurs possibles\n\t\tfor (var j = 0; j < heurs.length ; j++) {\n\t\t\tif (time != null && time == j && sub != null && sub == i) {\n\t\t\t\thtmlTime += \"<li class=\\\"duree-massage\\\"><input class=\\\"input-time-list time-spa-list\\\" type=\\\"radio\\\" value=\\\"\"+ heurs[j][0] +\"\\\" checked id=\\\"time\"+j+i+id+\"\\\" name=\\\"massageSuPrice[\"+id+\"][]\\\" data-info=\\\"[\"+ [id,i,j] +\"]\\\" data-price=\\\"[\"+ [heurs[j][1],heurs[j][2],heurs[j][3],heurs[j][4]] +\"]\\\" data-sub=\\\"\"+categories[1][i][0]+\"\\\" data-name=\\\"\"+name+\"\\\" ><label class=\\\"form label-spa\\\" for=\\\"time\"+j+i+id+\"\\\"> \"+ heurs[j][0] +\" </label></li>\"\n\t\t\t}else{\n\t\t\t\thtmlTime += \"<li class=\\\"duree-massage\\\"><input class=\\\"input-time-list time-spa-list\\\" type=\\\"radio\\\" value=\\\"\"+ heurs[j][0] +\"\\\" id=\\\"time\"+j+i+id+\"\\\" name=\\\"massageSuPrice[\"+id+\"][]\\\" data-info=\\\"[\"+ [id,i,j] +\"]\\\" data-price=\\\"[\"+ [heurs[j][1],heurs[j][2],heurs[j][3],heurs[j][4]] +\"]\\\" data-sub=\\\"\"+categories[1][i][0]+\"\\\" data-name=\\\"\"+name+\"\\\" ><label class=\\\"form label-spa\\\" for=\\\"time\"+j+i+id+\"\\\"> \"+ heurs[j][0] +\" </label></li>\"\n\t\t\t}\n\t\t}\n\t\thtmlTime += \"</ul></div>\"\n\t}\n\treturn \"<div class=\\\"row\\\"><div class=\\\"col-sm-12 sm-9-spa\\\"><div class=\\\"innerWrapper\\\"><div class=\\\"table-responsive table-responsiveInfos\\\"><table class=\\\"table tableInfos\\\"><thead><tr class=\\\"tr\\\"><th id=\\\"tableHead\\\">\"+name+\"</th></tr></thead></table></div></div></div></div><div class=\\\"row\\\"><div class=\\\"col-sm-10\\\"><h4><center class=\\\"titleMassage\\\">Types de massage</center></h4><div class=\\\"sm-6-massage\\\">\"+ htmlSub +\"</div></div><div class=\\\"col-sm-2 col-sm2Duree\\\"><h4>Durée(min)</h4>\"+htmlTime+\"</div></div>\"\n}\n\n\n\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n/* #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################### */\n\nfunction showTimesOnClickMassageSu(){\n\t// data-info=\\\"[\"+ [id,i] +\"]\\\"\n\tlet dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages)\n\tlet myData = JSON.parse(this.dataset.info)[0]\n\tdocument.getElementById(\"list-order-\"+myData).classList.add(\"hidden\")\n\tlet timeListAll = document.getElementsByClassName(\"times-massage\")\n\tlet timeList = []\n\tlet inputList = []\n\t// Enregistrement dans la session\n\tlet sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"))\n\t// sessionMassage.push({id:id,cat:categories[0],sub:\"\",time:\"\",price:\"\"})\n\tfor (var i = sessionMassage.length - 1; i >= 0; i--) {\n\t\tif(sessionMassage[i].id == myData){\n\t\t\tsessionMassage[i].sub = JSON.parse(this.dataset.info)[1]\n\t\t\tsessionMassage[i].time = \"\"\n\t\t}\n\t}\n\tsessionStorage.setItem(\"massages\",JSON.stringify(sessionMassage))\n\t// Modification dans le DOM\n\n\t// Selection les heurs et les checkbox a cocher disponible\n\tfor (var i = 0; i < timeListAll.length ; i++) {\n\t\tif (JSON.parse(timeListAll[i].dataset.info)[0] == myData) {\n\t\t\ttimeList = timeListAll[i].parentElement.getElementsByTagName(\"div\")\n\t\t\tinputList = timeListAll[i].parentElement.getElementsByTagName(\"input\")\n\t\t\tbreak\n\t\t}\n\t}\n\t// remetre a zero les choix precedent sur les heurs dispo\n\tfor (var i = inputList.length - 1; i >= 0; i--) {\n\t\tinputList[i].checked = false\n\t}\n\t// decocher les autre type de massage selectionné recedent!\n\tlet listCheck = document.getElementsByClassName(\"massage-su\")\n\tfor (var i = listCheck.length - 1; i >= 0; i--) {\n\t\tif (JSON.parse(listCheck[i].dataset.info)[0] == myData && listCheck[i] != this) {\n\t\t\tlistCheck[i].checked = false\n\t\t}\n\t}\n\tif (this.checked) {\n\t\tfor (var i = 0; i < timeList.length ; i++) {\n\t\t\tif (timeList[i].dataset.info == this.dataset.info){\n\t\t\t\ttimeList[i].className = \"times-massage\"\n\t\t\t}else{\n\t\t\t\ttimeList[i].className = \"times-massage hidden\"\n\t\t\t}\n\t\t}\n\t}else{\n\t\tfor (var i = 0; i < timeList.length ; i++) {\n\t\t\tif (timeList[i].dataset.info == this.dataset.info){\n\t\t\t\ttimeList[i].className = \"times-massage hidden\"\n\t\t\t}\n\t\t}\n\t}\n\tpriceTotalForAllMassage(dataMassages)\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\n\n/*==========================================================================*/\n// Fonction pour l'enregistrement de l'heurs\nfunction addHoursInPrestation(){\n\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"))\n\tif (this.name == \"heureMassage\"){\n\t\tprestations.heureMassage = this.value\n\t}else{\n\t\tprestations.heureSpa = this.value\n\t}\n\tsessionStorage.setItem(\"prestations\",JSON.stringify(prestations))\n}\n\n/*==========================================================================*/\n// fonction principale SPA\n// evenement on click\nfunction actualiseDomSpa(id,data=\"\"){\n\t// Modification dans le DOM\n\tlet div = document.createElement('div')\n\tdiv.classList.add('spa-list-prestations')\n\tif (data != \"\") {\n\t\t// [spa[i].id,spa[i].time,spa[i].option,spa[i].info]\n\t\tdiv.innerHTML = valueToHtmlSpa(data[0],data[1],data[2],data[3])\n\t}else{\n\t\tdiv.innerHTML = valueToHtmlSpa(id)\t\n\t}\n\n\tdocument.getElementById('spa-input').appendChild(div)\n\n\t// Ajout des sous element dans la session et dans le panier\n\tlet timeSpa = document.querySelectorAll(\".time-spa-list\")\n\ttimeSpa.forEach(tSpa => {\n\t\ttSpa.addEventListener('change',addRmvTimSpaInOrder);\n\t});\n\n\tlet optionSpa = document.querySelectorAll(\".option-spa-list\")\n\toptionSpa.forEach(oSpa => {\n\t\toSpa.addEventListener('change',addRmvOptionSpaInOrder);\n\t});\n\n\t// Ajout des autre information dans la session\n\tlet logement = document.querySelectorAll(\".logement\")\n\tlet installation = document.querySelectorAll(\".installation\")\n\tlet typeSpa = document.querySelectorAll(\".typeSpa\")\n\n\tlogement.forEach(log => {\n\t\tlog.addEventListener('change',changeLogement);\n\t});\n\tinstallation.forEach(inst => {\n\t\tinst.addEventListener('change',changeInstallation);\n\t});\n\ttypeSpa.forEach(type => {\n\t\ttype.addEventListener('change',changeTypeSpa);\n\t});\n\t// Ajout dans le panier\n\taddSpaInOrder(id)\n\t// nombre de spa - 0 +\n\tnumberSpaSelected()\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\nfunction addSpaList(){\n\tlet id = incrementeInc() // Augmente de 1 la session\n\t// Enregistrement dans la session\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\t// [logemtn,installation,eau]\n\tsessionSpa.push({id:id,time:\"\",option:[],info:[\"Appartement\",\"Intérieur\",\"Cumulus - Ballon d\\'eau (eau chaude limitée)\"]})\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n\tactualiseDomSpa(id)\n}\n// evenement on click\nfunction removeSpaList(){\n\tlet dataForm = JSON.parse(document.getElementById('form-data').dataset.spas)\n\tlet dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions)\n\t// Enregistrement dans la session\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tsessionSpa.pop()\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n\tnumberAtOrderBtn()\n\t// Modification dans le DOM\n\tlet list = document.getElementsByClassName(\"spa-list-prestations\")\n\tif (list.length > 0) {\n\t\tlist[list.length-1].remove()\n\t\t// supprimer l'element dans le panier\n\t\trmvSpaInOrder()\n\t\t// recalculer le prix total\n\t\tpriceTotalForAllSpa(dataOption,dataForm)\n\t}\n\tnumberSpaSelected()\n\t// Grand prix total\n\tbigTotalPrice()\n}\n////////////////////////////////////////////////////////\n// fonction principale commande SPA\nfunction addSpaInOrder(id){\n\tlet divOrder = document.getElementById(\"spa-order\")\n\tlet div = document.createElement(\"div\")\n\tdiv.classList = \"spa-order hidden\"\n\tdiv.setAttribute(\"id\",\"spa-list-\"+id)\n\tdiv.innerHTML = \"<p class=\\\"ul-panier\\\"><span class=\\\"spa-duration\\\">Spa pour : <span id=\\\"spa-time-\"+id+\"\\\"></span> h </span><br><span id=\\\"spa-price-\"+id+\"\\\"></span></p><ul></ul>\"\n\tdivOrder.appendChild(div)\n}\n\nfunction rmvSpaInOrder(){\n\tlet a = document.getElementsByClassName(\"spa-order\")\n\ta[a.length-1].remove()\n\tif(a.length == 0){\n\t\tdocument.getElementById(\"spa-order\").classList.add('hidden');\n\t}\n}\n\nfunction addRmvTimSpaInOrder(){ //checkbox na option spa\n\tlet dataForm = JSON.parse(document.getElementById('form-data').dataset.spas)\n\tlet dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions)\n\tlet index = this.dataset.index\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\t// Activer les checkbox pour les options spa\n\tlet inputList = document.querySelectorAll(\".option-spa-list[data-index=\\'\"+index+\"\\']\")\n\tfor (var i = inputList.length - 1; i >= 0; i--) {\n\t\tinputList[i].removeAttribute(\"disabled\")\n\t}\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\tif (sessionSpa[i].id == index) {\n\t\t\tsessionSpa[i].time = this.dataset.array\n\t\t\tbreak\n\t\t}\n\t}\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n\tnumberAtOrderBtn()\n\t// Ajouter l'element selectionné dans le dom\n\thtmlTimeSpaOrder(this.value,index,dataOption,dataForm)\n}\n\nfunction htmlTimeSpaOrder(name,index,dataOption,dataForm){\n\tdocument.getElementById(\"spa-order\").classList.remove('hidden');\n\tdocument.getElementById(\"spa-list-\"+index).classList.remove('hidden');\n\tdocument.getElementById(\"spa-time-\"+index).innerHTML = name\n\t// calcul prix pour un spa selectionné\n\t// let pricesSpa = JSON.parse(this.dataset.prices)[1]\n\t// let acompteSpa = JSON.parse(this.dataset.acompte)[1]\n\tpriceTotalForOneSpa(index,dataOption,dataForm)\n\t// total prix pours les spas selectionné\n\tpriceTotalForAllSpa(dataOption,dataForm)\n}\n\nfunction addRmvOptionSpaInOrder(){ //checkbox na option spa\n\tlet dataForm = JSON.parse(document.getElementById('form-data').dataset.spas)\n\tlet dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions)\n\tlet index = this.dataset.index\n\tlet id = JSON.parse(this.dataset.array)\n\t// Ajout ou supression d'element dans la session\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tlet listOptions = []\n\tif(this.checked){\n\t\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\t\tif (sessionSpa[i].id == index) {\n\t\t\t\tsessionSpa[i].option = [id]\n\t\t\t\tlistOptions = sessionSpa[i].option\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}else{\n\t\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\t\tif (sessionSpa[i].id == index) {\n\t\t\t\tsessionSpa[i].option = []\n\t\t\t\tlistOptions = sessionSpa[i].option\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tlet inputList = document.querySelectorAll(\".option-spa-list[data-index=\\'\"+index+\"\\']\")\n\tinputList.forEach(inputL => {\n\t\tif(this != inputL){\n\t\t\tinputL.checked = false\n\t\t}\n\t});\n\n\tsessionStorage.setItem(\"spa\",JSON.stringify(sessionSpa))\n\t// Ajout des element dans le dom\n\thtmlOptionSpaOrder(index,dataOption,dataForm,listOptions)\n}\n\nfunction htmlOptionSpaOrder(index,dataOption,dataForm,listOptions){\n\tlet ulList = (document.getElementById(\"spa-list-\"+index).getElementsByTagName(\"ul\"))\n\tlet liList = \"\"\n\t// [1, \"Décoration romantique\", 20] agencement dans la dataOption\n\tfor (var i = 0; i < listOptions.length; i++) {\n\t\tliList += \"<li class=\\\"li-ambiance\\\">Ambiance : \"+dataOption[listOptions[i]][1]+\"</li>\"\n\t}\n\tulList[0].innerHTML = liList\n\t// modifier la petite some\n\tpriceTotalForOneSpa(index,dataOption,dataForm)\n\t// modifier la somme total\n\tpriceTotalForAllSpa(dataOption,dataForm)\n}\n\nfunction priceTotalForOneSpa(index,dataOption,dataForm){\n// [spa.duration,spa.exceptional_price,spa.ordinary_price,spa.exceptional_acompte,spa.ordinary_acompte]\n// [24, 180, 100, 50, 30]\nlet exceptionalDate = [[\"14\",\"02\"],[\"24\",\"12\"],[\"25\",\"12\"],[\"31\",\"12\"]]\nlet zone = JSON.parse(sessionStorage.getItem(\"zone\"))\n\tzone = zone.date.split(\"/\") // MM - DD - YYYY\n\tlet exceptionalPrice = false\n\tfor (var i = exceptionalDate.length - 1; i >= 0; i--) {\n\t\tif (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]){\n\t\t\texceptionalPrice = true\n\t\t\tbreak\n\t\t}\n\t}\n\n\tlet spaPrice = document.getElementById(\"spa-price-\"+index)\n\t\n\tlet price = [0,0]\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\tif (sessionSpa[i].id == index) {\n\t\t\tif (exceptionalPrice) {\n\t\t\t\tprice[0] += dataForm[sessionSpa[i].time][1] // prix\n\t\t\t\tprice[1] += dataForm[sessionSpa[i].time][3] // acompte\n\t\t\t}else{\n\t\t\t\tprice[0] += dataForm[sessionSpa[i].time][2] // prix\n\t\t\t\tprice[1] += dataForm[sessionSpa[i].time][4] // acompte\n\t\t\t}\n\t\t\tlet spa = sessionSpa[i].option\n\t\t\tfor (var j = spa.length - 1; j >= 0; j--) {\n\t\t\t\tprice[0] += dataOption[spa[j]][2]\n\t\t\t}\n\t\t\tspaPrice.innerHTML = \"<li class=\\\"li-prix hidden\\\">Prix : \"+price[0]+\"€ </li><li class=\\\"li-acompte hidden\\\">Acompte : \"+price[1]+\"€</li>\"\n\t\t\tbreak\n\t\t}\n\t}\n}\n\nfunction priceTotalForAllSpa(dataOption,dataForm){\n\tlet exceptionalDate = [[\"14\",\"02\"],[\"24\",\"12\"],[\"25\",\"12\"],[\"31\",\"12\"]]\n\tlet zone = JSON.parse(sessionStorage.getItem(\"zone\"))\n\tzone = zone.date.split(\"/\") // MM - DD - YYYY\n\tlet exceptionalPrice = false\n\tfor (var i = exceptionalDate.length - 1; i >= 0; i--) {\n\t\tif (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]){\n\t\t\texceptionalPrice = true\n\t\t\tbreak\n\t\t}\n\t}\n\n\tlet spanPriceTotal = document.getElementById(\"spa-price-total\")\n\tlet prixSomme = [0,0]\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tlet tmp = \"\"\n\tfor (var i = sessionSpa.length - 1; i >= 0; i--) {\n\t\t// somme heurs des spa\n\t\tif (sessionSpa[i].time != \"\") {\n\t\t\tif (exceptionalPrice) {\n\t\t\t\tprixSomme[0] += dataForm[sessionSpa[i].time][1] // prix\n\t\t\t\tprixSomme[1] += dataForm[sessionSpa[i].time][3] // acompte\n\t\t\t}else{\n\t\t\t\tprixSomme[0] += dataForm[sessionSpa[i].time][2] // prix\n\t\t\t\tprixSomme[1] += dataForm[sessionSpa[i].time][4] // acompte\n\t\t\t}\n\t\t\t// some prix pour les options déco\n\t\t\ttmp = sessionSpa[i].option\n\t\t\tfor (var j = tmp.length - 1; j >= 0; j--) {\n\t\t\t\tprixSomme[0] += dataOption[tmp[j]][2]\n\t\t\t}\n\t\t}\n\t}\n\n\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"))\n\tprestations.priceSpa = prixSomme[0]\n\tsessionStorage.setItem(\"prestations\",JSON.stringify(prestations))\n\n\tspanPriceTotal.innerHTML = \" : \"+prixSomme[0]+\" € \"\n\tspanPriceTotal.dataset.price = \"[\"+[prixSomme[0],prixSomme[1]]+\"]\"\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\n/*==========================================================================*/\n\t// fonction principale MASSAGE\n\tfunction addCategoryMassage(){\n\t\tlet id = incrementeInc()\n\t\tlet data = document.getElementById('form-data').dataset\n\t\tlet dataMassages = JSON.parse(data.massages)\n\t\tlet categories = []\n\t\tif ( this.dataset.cat == \"Homme\") {\n\t\t\tcategories = dataMassages[0]\n\t\t}else{\n\t\t\tcategories = dataMassages[1]\n\t\t}\n\t// Enregistrement dans la session\n\t\n\tlet sessionSpa = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tsessionSpa.push({id:id,cat:categories[0],sub:\"\",time:\"\"})\n\tsessionStorage.setItem(\"massages\",JSON.stringify(sessionSpa))\n\t/* ************************************** MILA MODAL NGAMBA */\n\tif (sessionSpa.length >= 1){\n\t\tlet homme = document.getElementById('addHomme')\n\t\tlet femme = document.getElementById('addFemme')\n\t\thomme.addEventListener('click',showAlert);\n\t\tfemme.addEventListener('click',showAlert);\n\t}\n\n\tif (sessionSpa){\n\t\tlet moinhomme = document.getElementById('moinHomme')\n\t\tlet moinfemme = document.getElementById('moinFemme')\n\n\t\tmoinhomme.addEventListener('click',deletAlert);\n\t\tmoinfemme.addEventListener('click',deletAlert);\n\t}\n\tfunction deletAlert(){\n\t\tlet homme = document.getElementById('addHomme')\n\t\tlet femme = document.getElementById('addFemme')\n\n\t\thomme.removeAttribute(\"data-target\");\n\t\thomme.removeAttribute(\"data-toggle\");\n\t\tfemme.removeAttribute(\"data-target\");\n\t\tfemme.removeAttribute(\"data-toggle\");\n\t\tif(sessionSpa.length > 0 ){\n\t\t\t\tsessionSpa.splice(-1,1);\n\t\t}\n\t}\n\n\tfunction showAlert(){\n\t\tlet homme = document.getElementById('addHomme')\n\t\tlet femme = document.getElementById('addFemme')\n\t\tif (sessionSpa.length >= 1){\n\t\t\thomme.setAttribute(\"data-target\", \"#pushMassage2\");\n\t\t\thomme.setAttribute(\"data-toggle\", \"modal\");\n\t\t\tfemme.setAttribute(\"data-target\", \"#pushMassage2\");\n\t\t\tfemme.setAttribute(\"data-toggle\", \"modal\");\n\t\t}\n\t}\n\t/* ************************************** MILA MODAL NGAMBA */\n\t// Modification dans le DOM\n\tactualiseDomMassage(this.dataset.cat,id)\n}\n\nfunction actualiseDomMassage(name,id,sub=null,time=null){\n\tlet div = document.createElement('div')\n\tdiv.classList.add('massage-list-'+name)\n\tif (sub != null && time != null) {\n\t\tdiv.innerHTML = valueToHtmlMassage(name,id,sub,time)\n\t}else{\n\t\tdiv.innerHTML = valueToHtmlMassage(name,id)\t\n\t}\n\tdocument.getElementById(\"massage-order\").innerHTML += \"<div id=\\\"list-order-\"+id+\"\\\" class=\\\"hidden\\\"><div><p class=\\\"msg-duration\\\">\"+ name +\"</p></div><div class=\\\"prestation-message\\\"><li class=\\\"li-msgType\\\"></li><div><ul></ul></div></div></div>\"\n\n\tdocument.getElementById('massage-input').appendChild(div)\n\n\t// nombre de massage pour homme et femme\n\tnumberMassageSelected(name)\n\t// evement pour afficher les horaires disponible pour un massages\n\tlet checkRadio = document.querySelectorAll('.massage-su');\n\tcheckRadio.forEach(checkR => {\n\t\tcheckR.addEventListener('change',showTimesOnClickMassageSu);\n\t});\n\t// evenement pour ajouter un element si une Time est cocher\n\tlet checkRadioList = document.querySelectorAll('.input-time-list');\n\tcheckRadioList.forEach(checkR => {\n\t\tcheckR.addEventListener('change',addMassageInOrder);\n\t});\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\n/* ########################################################################################################################################################################## */\n/* ########################################################################################################################################################################## */\n\nfunction addMassageInOrder(){\n\tlet dataForm = JSON.parse(document.getElementById('form-data').dataset.spas)\n\tlet dataOption = JSON.parse(document.getElementById('form-data').dataset.spaoptions)\n\tlet dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages)\n\t/*  [id,i,j]  */\n\t// <input class=\"input-time-list\" type=\"radio\" value=\"60\" id=\"time164\" name=\"massageSuPrice[4][]\" data-info=\"[4,6,1]\" data-name=\"Homme\">\n\tlet myData = JSON.parse(this.dataset.info)\n\t// Modifier la session\n\tlet sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tfor (var i = sessionMassage.length - 1; i >= 0; i--) {\n\t\tif(sessionMassage[i].id == myData[0]){\n\t\t\tsessionMassage[i].time = myData[2]\n\t\t\tnumberAtOrderBtn()\n\t\t}\n\t}\n\tsessionStorage.setItem(\"massages\",JSON.stringify(sessionMassage))\n\t// Calculer le prix et ajouter dans le dom\n\t// priceTotalForOneMassage(this.dataset.name,myData,this.dataset.sub)\n\tpriceTotalForOneMassage(dataMassages,myData[0])\n\tpriceTotalForAllMassage(dataMassages)\n}\n\nfunction priceTotalForOneMassage(dataMassages,myData){\n\tlet exceptionalDate = [[\"14\",\"02\"],[\"24\",\"12\"],[\"25\",\"12\"],[\"31\",\"12\"]]\n\tlet zone = JSON.parse(sessionStorage.getItem(\"zone\"))\n\tzone = zone.date.split(\"/\") // MM - DD - YYYY\n\tlet exceptionalPrice = false\n\tfor (var i = exceptionalDate.length - 1; i >= 0; i--) {\n\t\tif (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]){\n\t\t\texceptionalPrice = true\n\t\t\tbreak\n\t\t}\n\t}\n\n\tlet sub =\"\"\n\tlet time =\"\"\n\tlet cat =\"\"\n\n\tlet sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tfor (var i = sessionMassage.length - 1; i >= 0; i--) {\n\t\tif (sessionMassage[i].id == myData) {\n\t\t\tsub = sessionMassage[i].sub\n\t\t\ttime = sessionMassage[i].time\n\t\t\tcat = sessionMassage[i].cat\n\t\t\tbreak\n\t\t}\n\t}\n\tlet categories = []\n\tif ( cat == \"Homme\") {\n\t\tcategories = dataMassages[0]\n\t}else{\n\t\tcategories = dataMassages[1]\n\t}\n\tlet divMassage = document.getElementById(\"list-order-\"+myData)\n\tdocument.getElementById(\"massage-order\").classList.remove('hidden')\n\tdivMassage.classList.remove('hidden')\n\tdivMassage.getElementsByTagName(\"li\")[0].innerHTML = categories[1][sub][0]\n\t//  [30, 70, 30, 50, 20]\n\tif (exceptionalPrice) {\n\t\tdivMassage.getElementsByTagName(\"ul\")[0].innerHTML = \"<li class=\\\"li-msgPrix hidden\\\">Prix: \"+categories[1][sub][1][time][1]+\"€</li><li class=\\\"li-msgAcompte hidden\\\">Acompte: \"+categories[1][sub][1][time][2]+\"€</li>\"\n\t}else{\n\t\tdivMassage.getElementsByTagName(\"ul\")[0].innerHTML = \"<li class=\\\"li-msgPrix hidden\\\">Prix: \"+categories[1][sub][1][time][3]+\"€</li><li class=\\\"li-msgAcompte hidden\\\">Acompte: \"+categories[1][sub][1][time][4]+\"€</li>\"\n\t}\n}\n\nfunction priceTotalForAllMassage(dataMassages){\n\tlet exceptionalDate = [[\"14\",\"02\"],[\"24\",\"12\"],[\"25\",\"12\"],[\"31\",\"12\"]]\n\tlet zone = JSON.parse(sessionStorage.getItem(\"zone\"))\n\tzone = zone.date.split(\"/\") // MM - DD - YYYY\n\tlet exceptionalPrice = false\n\tfor (var i = exceptionalDate.length - 1; i >= 0; i--) {\n\t\tif (exceptionalDate[i][0] == zone[0] && exceptionalDate[i][1] == zone[1]){\n\t\t\texceptionalPrice = true\n\t\t\tbreak\n\t\t}\n\t}\n\n\tlet sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tlet price = 0\n\tlet acompte = 0\n\tfor (var i = sessionMassage.length - 1; i >= 0; i--) {\n\t\tif (typeof(sessionMassage[i].sub) == \"number\" && typeof(sessionMassage[i].time) == \"number\") {\n\t\t\tlet categories = []\n\t\t\tif ( sessionMassage[i].cat == \"Homme\") {\n\t\t\t\tcategories = dataMassages[0]\n\t\t\t}else{\n\t\t\t\tcategories = dataMassages[1]\n\t\t\t}\n\n\t\t\tif (exceptionalPrice) {\n\t\t\t\tprice += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][1]\n\t\t\t\tacompte += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][2]\n\t\t\t}else{\n\t\t\t\tprice += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][3]\n\t\t\t\tacompte += categories[1][sessionMassage[i].sub][1][sessionMassage[i].time][4]\n\t\t\t}\n\t\t}\n\t}\n\n\tdocument.getElementById(\"massage-price-total\").innerHTML = \" : \"+price+\"€\"+acompte+\"€\"\n\tdocument.getElementById(\"massage-price-total\").dataset.price = \"[\"+[price,acompte]+\"]\"\n\n\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"))\n\tprestations.priceMassage = price\n\tsessionStorage.setItem(\"prestations\",JSON.stringify(prestations))\t\n\tdocument.getElementById(\"massage-price-total\").innerHTML = \" : \"+price+\" € \"\n\n\tif (price == 0 && acompte == 0) {\n\t\tdocument.getElementById(\"massage-order\").classList.add('hidden')\n\t}\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\n/* ########################################################################################################################################################## */\n/* ########################################################################################################################################################################## */\n\nfunction removeCategoryMassage(){\n\tlet dataMassages = JSON.parse(document.getElementById('form-data').dataset.massages)\n\t// Enregistrement dans la session\n\tlet sessionMassage = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tfor (var i = sessionMassage.length - 1; i >= 0; i--) {\n\t\tif(sessionMassage[i].cat == this.dataset.cat){\n\t\t\tdocument.getElementById(\"list-order-\"+sessionMassage[i].id).remove()\n\t\t\tsessionMassage.splice(i,1)\n\t\t\tbreak\n\t\t}\n\t}\n\tsessionStorage.setItem(\"massages\",JSON.stringify(sessionMassage))\n\t// Modification dans le DOM\n\tlet list = document.getElementsByClassName('massage-list-'+this.dataset.cat)\n\tif (list.length > 0) {\n\t\tlist[list.length-1].remove()\n\t}\n\t// nombre de massage pour homme et femme\n\tnumberMassageSelected(this.dataset.cat)\n\n\tnumberAtOrderBtn()\n\tpriceTotalForAllMassage(dataMassages)\n\t// Grand prix total\n\tbigTotalPrice()\n}\n/*==========================================================================*/\n\t// fonction principale CADEAU\n\tfunction removeCadeau(){\n\t\tlet id = JSON.parse(this.dataset.id)\n\t\tlet cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\t\tfor (var i = cadeau.length - 1; i >= 0; i--) {\n\t\t\tif(cadeau[i][0] == id){\n\t\t\t\tcadeau[i][1]--\n\t\t\t\tdocument.getElementById(id+\"-nbr\").innerHTML = cadeau[i][1]\n\t\t\t\tif(cadeau[i][1] == 0){\n\t\t\t\t\tcadeau.splice(i,1)\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tsessionStorage.setItem(\"cadeau\",JSON.stringify(cadeau))\n\t\tnumberAtOrderBtn()\n\n\t\tlet changeCadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\t\tvalueInInput = \"\"\n\t\tfor (var i = changeCadeau.length - 1; i >= 0; i--) {\n\t\t\tvalueInInput += changeCadeau[i][0]+\"-\"+changeCadeau[i][1]+\"|\"\n\t\t}\n\t\tdocument.getElementById(\"cadeau-id\").value = valueInInput\n\t// calcul du prix\n\tpriceForAllCadeau()\n}\nfunction aDDCadeau(){\n\tlet id = JSON.parse(this.dataset.id)\n\tlet cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\tlet test = true\n\tfor (var i = cadeau.length - 1; i >= 0; i--) {\n\t\tif(cadeau[i][0] == id){\n\t\t\ttest = false\n\t\t\tcadeau[i][1]++\n\t\t\tdocument.getElementById(id+\"-nbr\").innerHTML = cadeau[i][1]\n\t\t\tbreak\n\t\t}\n\t}\n\tif (test) {\n\t\tcadeau.push([id,1,this.dataset.name,this.dataset.price])\n\t\tdocument.getElementById(id+\"-nbr\").innerHTML = 1\n\t}\n\tsessionStorage.setItem(\"cadeau\",JSON.stringify(cadeau))\n\tnumberAtOrderBtn()\n\n\tlet changeCadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\tvalueInInput = \"\"\n\tfor (var i = changeCadeau.length - 1; i >= 0; i--) {\n\t\tvalueInInput += changeCadeau[i][0]+\"-\"+changeCadeau[i][1]+\"|\"\n\t}\n\tdocument.getElementById(\"cadeau-id\").value = valueInInput\n\t// calcul du prix\n\tpriceForAllCadeau()\n}\n\nfunction priceForAllCadeau(){\n\tlet addCadeau = document.querySelectorAll(\".cadeau-add\")\n\tinfoCadeau = []\n\taddCadeau.forEach(listCadeau => {\n\t\tinfoCadeau.push([JSON.parse(listCadeau.dataset.id),listCadeau.dataset.name,JSON.parse(listCadeau.dataset.price)])\n\t});\n\tlet cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\tlet orderCadeau = document.getElementById(\"cadeau-order\")\n\tlet totalPrice = 0\n\tlet elementDom = \"<ul>\"\n\tfor (var i = 0; i < cadeau.length; i++) {\n\t\tfor (var j = infoCadeau.length - 1; j >= 0; j--) {\n\t\t\tif (cadeau[i][0] == infoCadeau[j][0]){\n\t\t\t\ttotalPrice += cadeau[i][1]*infoCadeau[j][2] /* isany * prix */ /* infoCadeau[i][1] anarany*/\n\t\t\t\telementDom += \"<li class=\\\"li-cadeau\\\">\"+ infoCadeau[i][1] +\"<div class=\\\"nbr-cadeau\\\"> Nombres : \"+ cadeau[i][1] +\" <br> Prix : \"+ cadeau[i][1]*infoCadeau[j][2] +\" € </br></li>\"\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\tif (totalPrice == 0) {\n\t\torderCadeau.classList.remove(\"hidden\")\n\t\torderCadeau.classList.add(\"hidden\")\n\t\tdocument.getElementById(\"cadeau-price-total\").innerHTML = \"\"\n\t}else{\n\t\torderCadeau.classList.remove(\"hidden\")\n\t\tdocument.getElementById(\"cadeau-price-total\").innerHTML = totalPrice\n\t\torderCadeau.getElementsByTagName(\"div\")[0].innerHTML = elementDom+\"</ul>\"\n\t}\n\t// Grand prix total\n\tbigTotalPrice()\n}\n\nfunction bigTotalPrice(){\n\tlet spa = document.getElementById(\"spa-price-total\").dataset.price\n\tlet massage = document.getElementById(\"massage-price-total\").dataset.price\n\n\tif ((spa == \"\" || spa == \"[0,0]\") && (massage == \"\" || massage == \"[0,0]\")) {\n\t\tdocument.getElementById(\"empty-order\").classList.remove(\"hidden\")\n\t}else{\n\t\tdocument.getElementById(\"empty-order\").classList.add(\"hidden\")\n\t}\n\tif (spa != \"\") {\n\t\tspa = JSON.parse(spa)\n\t}else{\n\t\tspa = [0,0]\n\t}\n\tif (massage != \"\") {\n\t\tmassage = JSON.parse(massage)\n\t}else{\n\t\tmassage = [0,0]\n\t}\n\tlet code_promo = 0\n\tlet prestations = JSON.parse(sessionStorage.getItem(\"prestations\"));\n\tif (prestations.code_promo) {\n\t\tcode_promo = prestations.code_promo[1]\n\t}\n\n\tlet somePrice = spa[0] + massage[0]\n\tlet someAcompte = spa[1] + massage[1]\n\n\tif(somePrice > 0){\n\t\tsomePrice -= code_promo\n\t}\n\tif(someAcompte > 0){\n\t\tsomeAcompte -= code_promo\n\t}\n\n\tdocument.getElementById(\"total-price\").innerHTML = somePrice\n\tdocument.getElementById(\"total-acompte\").innerHTML =  someAcompte\n}\n// pour l'enregistrement des donné dans le panier du boutons\nfunction numberAtOrderBtn(){\n\tlet spa = JSON.parse(sessionStorage.getItem(\"spa\"))\n\tlet massages = JSON.parse(sessionStorage.getItem(\"massages\"))\n\tlet cadeau = JSON.parse(sessionStorage.getItem(\"cadeau\"))\n\tlet number = 0\n\tif (spa) {\n\t\tfor (var i = spa.length - 1; i >= 0; i--) {\n\t\t\tif(spa[i].time != \"\"){\n\t\t\t\tnumber++\n\t\t\t}\n\t\t}\n\t}\n\tif (massages) {\n\t\tfor (var i = massages.length - 1; i >= 0; i--) {\n\t\t\tif(typeof(massages[i].sub) != \"string\"){\n\t\t\t\tnumber++\t\n\t\t\t}\n\t\t}\n\t}\n\tif (cadeau) {\n\t\tfor (var i = cadeau.length - 1; i >= 0; i--) {\n\t\t\tnumber += cadeau[i][1]\n\t\t}\n\t}\n\tdocument.getElementById(\"number-cart-ok\").innerHTML = number\n}\n\ndocument.getElementById(\"nex-submi-tag\").addEventListener('click',submitFormulaire)\n\nfunction submitFormulaire(){\n\tif(true){\n\t\tdocument.getElementById(\"form-data\").submit()\n\t}else{\n\t\tdocument.getElementById(\"loc-spa-fafana\").classList.add(\"active\")\n\t\tdocument.getElementsByClassName(\"accordion-body js-accordion-body\").style.display=\"block\"\n\t}\n}\n\nfunction changePromoCode(prestations) {\n\tdocument.getElementById(\"alert-code\").classList.remove(\"hidden\");\n\tdocument.getElementById(\"form-promo-code\").classList.add(\"hidden\");\n\tdocument.getElementById(\"alert-code\").innerHTML = \"Votre code promo \"+ prestations.code_promo[0] +\" est validé avec succès.\" + \" Vous avez gagné un reduction de \" +prestations.code_promo[1]+ \"€ pour l'acompte total à payer!\";\n}\n\n// document.getElementById('submi-tag').onCl\n// LIGNE 580 RA ILAINA ILAY ACCOMPTE\n// spanPriceTotal.innerHTML = \"prix: \"+prixSomme[0]+\"€ acompte: \"+prixSomme[1]+\"€\"\n// LIGNE 712 RA ILAINA ILAY ACCOMPTE\n// document.getElementById(\"massage-price-total\").innerHTML = \"prix: \"+price+\" € \"+acompte+\"€\"\n\n/*\n\n\n\n*/\n"]},"metadata":{},"sourceType":"module"}